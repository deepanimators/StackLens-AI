
> stacklens-ai-platform@1.0.0 test:api
> playwright test tests/api

[dotenv@17.2.3] injecting env (14) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[2m[WebServer] [22m
[2m[WebServer] [22m> stacklens-ai-platform@1.0.0 test:server /Users/deepak/Downloads/Projects/StackLens-AI-Deploy
[2m[WebServer] [22m> cross-env NODE_ENV=test node --import tsx --no-warnings apps/api/src/index.ts
[2m[WebServer] [22m
[2m[WebServer] [22m[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
[2m[WebServer] [22mü§ñ AI Service initialized with 1 providers: gemini
[2m[WebServer] [22m[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
[2m[WebServer] [22m[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
[2m[WebServer] [22müöÄ RAG: Vector database initialized
[2m[WebServer] [22m{"level":"WARN","timestamp":"2025-11-25T19:39:12.173Z","logger":"kafkajs","message":"KafkaJS v2.0.0 switched default partitioner. To retain the same partitioning behavior as in previous versions, create the producer with the option \"createPartitioner: Partitioners.LegacyPartitioner\". See the migration guide at https://kafka.js.org/docs/migration-guide-v2.0.0#producer-new-default-partitioner for details. Silence this warning by setting the environment variable \"KAFKAJS_NO_PARTITIONER_WARNING=1\""}
[2m[WebServer] [22mSetting up SQLite database...
[2m[WebServer] [22m‚úÖ SQLite database initialized successfully
[2m[WebServer] [22müîÑ Starting server initialization...
[2m[WebServer] [22m‚úÖ Database tables initialized
[2m[WebServer] [22mStarting LogWatcher service for real-time monitoring...
[2m[WebServer] [22müìç Watching directories: /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/data, /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/logs
[2m[WebServer] [22m[LogWatcherService] Started watching 2 file(s)
[2m[WebServer] [22m‚úÖ LogWatcher service started successfully
[2m[WebServer] [22m‚úÖ Routes registered successfully
[2m[WebServer] [22müìö RAG: Indexing 50 resolved error patterns...
[2m[WebServer] [22m‚úÖ RAG: Knowledge base populated with 50 patterns
[2m[WebServer] [22m1:09:14 AM [express] serving on port 4001
[2m[WebServer] [22müîÑ Indexing existing errors for RAG system...
[2m[WebServer] [22m‚ÑπÔ∏è No errors with suggestions found for indexing
[2m[WebServer] [22m‚úÖ Enhanced RAG Suggestor initialized
[2m[WebServer] [22müéØ Enhanced RAG system ready with vector database
[2m[WebServer] [22müöÄ Starting Python vector database service...
[2m[WebServer] [22m‚úÖ Vector database service initialized
[2m[WebServer] [22m‚ö†Ô∏è Enhanced vector service not found, using fallback similarity search

Running 102 tests using 5 workers

[dotenv@17.2.3] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
Starting authentication setup...
‚úì Auth state file verified
  ‚úì    2 [setup] ‚Ä∫ tests/auth.setup.ts:135:1 ‚Ä∫ verify auth state (910ms)
Using TEST_FIREBASE_TOKEN for authentication...
[2m[WebServer] [22m[DEBUG] verifyFirebaseToken called with token: 'eyJhbGciOiJSUzI1NiIsImtpZCI6Im1vY2sta2V5LWlkIiwidHlwIjoiSldUIn0.eyJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vZXJyb3ItYW5hbHlzaXMtZjQ2YzYiLCJhdWQiOiJlcnJvci1hbmFseXNpcy1mNDZjNiIsImF1dGhfdGltZSI6MTc2Mzc0ODA0MSwidXNlcl9pZCI6InRlc3QtdXNlci0wMDEiLCJzdWIiOiJ0ZXN0LXVzZXItMDAxIiwiaWF0IjoxNzYzNzQ4MDQxLCJleHAiOjE3NjQzNTI4NDEsImVtYWlsIjoidGVzdEBzdGFja2xlbnMuYWkiLCJlbWFpbF92ZXJpZmllZCI6ZmFsc2UsImZpcmViYXNlIjp7ImlkZW50aXRpZXMiOnsiZW1haWwiOlsidGVzdEBzdGFja2xlbnMuYWkiXX0sInNpZ25faW5fcHJvdmlkZXIiOiJwYXNzd29yZCJ9fQ.zVrPuGwTDrdpm9uPxx7HyDV1Zwex6AuWdc3HhojgdlQ'
[2m[WebServer] [22m[DEBUG] NODE_ENV: 'test'
[2m[WebServer] [22m‚ö†Ô∏è Token verification failed - likely expired. Attempting to decode without verification for development mode...
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m1:09:21 AM [express] POST /api/auth/firebase-signin 200 in 96ms :: {"user":{"id":1,"username":"Test ‚Ä¶
‚úì Token exchange successful
[2m[WebServer] [22m1:09:21 AM [express] GET /api/auth/me 200 in 1ms :: {"id":1,"email":"test@stacklens.ai","username":"‚Ä¶
[2m[WebServer] [22m1:09:21 AM [express] GET /api/admin/ui-settings 200 in 1ms :: {"theme":"light","sidebarCollapsed":fa‚Ä¶
[2m[WebServer] [22m1:09:21 AM [express] GET /api/admin/api-settings 200 in 2ms :: {"geminiApiKey":"AIzaSyAOu2YCkjimtYsv‚Ä¶
‚úì Authentication successful with session token
‚úì Authentication state saved to /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/.auth/user.json
  ‚úì    1 [setup] ‚Ä∫ tests/auth.setup.ts:15:1 ‚Ä∫ authenticate user (3.2s)
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
[2m[WebServer] [22m1:09:23 AM [express] GET /api/auth/me 401 in 0ms :: {"message":"Authentication required"}
[2m[WebServer] [22m[DEBUG] verifyFirebaseToken called with token: 'valid-test-token'
[2m[WebServer] [22m[DEBUG] NODE_ENV: 'test'
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m1:09:23 AM [express] POST /api/auth/firebase-signin 200 in 4ms :: {"user":{"id":1,"username":"Test U‚Ä¶
[2m[WebServer] [22m1:09:23 AM [express] GET /api/auth/me 200 in 1ms :: {"id":1,"email":"test@stacklens.ai","username":"‚Ä¶
  ‚úì    5 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:68:5 ‚Ä∫ Authentication API ‚Ä∫ GET /api/auth/me - should reject unauthenticated request (51ms)
[2m[WebServer] [22m[DEBUG] verifyFirebaseToken called with token: 'valid-test-token'
[2m[WebServer] [22m[DEBUG] NODE_ENV: 'test'
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m1:09:23 AM [express] POST /api/auth/firebase-verify 200 in 4ms :: {"valid":true,"user":{"id":1,"user‚Ä¶
  ‚úì    3 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:11:5 ‚Ä∫ Authentication API ‚Ä∫ POST /api/auth/firebase-signin - should authenticate user (67ms)
  ‚úì    4 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:42:5 ‚Ä∫ Authentication API ‚Ä∫ GET /api/auth/me - should return current user (71ms)
  ‚úì    6 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:27:5 ‚Ä∫ Authentication API ‚Ä∫ POST /api/auth/firebase-verify - should verify token (84ms)
[2m[WebServer] [22m[DEBUG] verifyFirebaseToken called with token: 'invalid-token'
[2m[WebServer] [22m[DEBUG] NODE_ENV: 'test'
[2m[WebServer] [22m1:09:23 AM [express] POST /api/auth/firebase-signin 401 in 1ms :: {"message":"Invalid Firebase token‚Ä¶
[2m[WebServer] [22mToken verification failed: Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test-errors.csv'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'text/csv'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099563752-216514892.csv'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099563752-216514892.csv'[39m,
[2m[WebServer] [22m  size: [33m33[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:09:23 AM [express] POST /api/upload 200 in 33ms :: {"fileId":21,"filename":"test-errors.csv","stat‚Ä¶
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test-errors.xlsx'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099563769-73873779.xlsx'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099563769-73873779.xlsx'[39m,
[2m[WebServer] [22m  size: [33m9[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:09:23 AM [express] POST /api/upload 200 in 30ms :: {"fileId":22,"filename":"test-errors.xlsx","sta‚Ä¶
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test.pdf'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/pdf'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099563785-333329611.pdf'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099563785-333329611.pdf'[39m,
[2m[WebServer] [22m  size: [33m9[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:09:23 AM [express] POST /api/upload 400 in 10ms :: {"message":"Invalid file type. Only Excel, CSV,‚Ä¶
  ‚úì    9 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:104:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should upload CSV file (107ms)
  ‚úì    7 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:54:5 ‚Ä∫ Authentication API ‚Ä∫ POST /api/auth/firebase-signin - should reject invalid token (172ms)
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'list-test.xlsx'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099563829-816290499.xlsx'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099563829-816290499.xlsx'[39m,
[2m[WebServer] [22m  size: [33m9[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:09:23 AM [express] POST /api/upload 200 in 4ms :: {"fileId":23,"filename":"list-test.xlsx","status‚Ä¶
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test.xlsx'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099563827-530203074.xlsx'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099563827-530203074.xlsx'[39m,
[2m[WebServer] [22m  size: [33m4[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:09:23 AM [express] POST /api/upload 200 in 7ms :: {"fileId":24,"filename":"test.xlsx","status":"up‚Ä¶
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mSkipping body parsing for: /api/files/24
[2m[WebServer] [22m1:09:23 AM [express] GET /api/files/24 200 in 6ms :: {"id":24,"filename":"test.xlsx","status":"pendi‚Ä¶
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test.xlsx'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099563838-661726951.xlsx'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099563838-661726951.xlsx'[39m,
[2m[WebServer] [22m  size: [33m4[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:09:23 AM [express] POST /api/upload 200 in 20ms :: {"fileId":25,"filename":"test.xlsx","status":"u‚Ä¶
  ‚úì   10 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:119:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should reject invalid file type (122ms)
  ‚úì   12 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:165:5 ‚Ä∫ File Upload API ‚Ä∫ GET /api/files/:id - should get file details (38ms)
[2m[WebServer] [22mSkipping body parsing for: /api/files/25
[2m[WebServer] [22müóëÔ∏è Attempting to delete file with ID: 25
[2m[WebServer] [22müìÅ File found: test.xlsx (file-1764099563838-661726951.xlsx)
[2m[WebServer] [22müîÑ Starting comprehensive cascade deletion process...
[2m[WebServer] [22müîç Finding error logs for file...
[2m[WebServer] [22müìä Found 0 error logs to clean up
[2m[WebServer] [22müìã Deleting error logs...
[2m[WebServer] [22müìà Deleting analysis history...
[2m[WebServer] [22müìÑ Deleting file record...
[2m[WebServer] [22müíæ Deleting physical file from disk...
[2m[WebServer] [22m‚úÖ Physical file deleted: uploads/file-1764099563838-661726951.xlsx
[2m[WebServer] [22m‚úÖ Cascade deletion completed successfully
[2m[WebServer] [22müìä Deletion statistics: {
[2m[WebServer] [22m  errorEmbeddings: [33m0[39m,
[2m[WebServer] [22m  suggestionFeedback: [33m0[39m,
[2m[WebServer] [22m  errorLogs: [33m0[39m,
[2m[WebServer] [22m  analysisHistory: [33m0[39m,
[2m[WebServer] [22m  physicalFile: [33mtrue[39m,
[2m[WebServer] [22m  logFile: [33mtrue[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:09:23 AM [express] DELETE /api/files/25 200 in 3ms :: {"message":"File and all related data delete‚Ä¶
  ‚úì    8 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:84:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should upload Excel file (181ms)
  ‚úò   13 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:190:5 ‚Ä∫ File Upload API ‚Ä∫ DELETE /api/files/:id - should delete file (50ms)
[2m[WebServer] [22mSkipping body parsing for: /api/files
[2m[WebServer] [22m1:09:23 AM [express] GET /api/files 200 in 4ms :: {"files":[{"id":21,"filename":"file-1764099563752-‚Ä¶
  ‚úò   11 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:138:5 ‚Ä∫ File Upload API ‚Ä∫ GET /api/files - should list uploaded files (242ms)
[2m[WebServer] [22m1:09:24 AM [express] GET /api/errors 200 in 21ms :: {"errors":[],"total":0,"page":1,"limit":20,"tota‚Ä¶
  ‚úì   14 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:25:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by severity (758ms)
[2m[WebServer] [22m1:09:25 AM [express] GET /api/errors 200 in 329ms :: {"errors":[{"id":341,"fileId":null,"storeNumber‚Ä¶
  ‚úì   15 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:13:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should support pagination (1.2s)
[2m[WebServer] [22m1:09:25 AM [express] GET /api/errors 200 in 248ms :: {"errors":[{"id":336,"fileId":null,"storeNumber‚Ä¶
  ‚úì   16 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:5:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should retrieve all errors (1.5s)
  ‚úò   17 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:58:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should search by message (734ms)
[2m[WebServer] [22m1:09:26 AM [express] GET /api/errors 200 in 1801ms :: {"errors":[{"id":341,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m1:09:26 AM [express] GET /api/errors 200 in 4ms :: {"errors":[],"total":0,"page":1,"limit":20,"total‚Ä¶
  ‚úì   19 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:80:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by store (698ms)
  ‚úò   18 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:69:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by resolved status (1.0s)
[2m[WebServer] [22m1:09:26 AM [express] GET /api/errors 200 in 791ms :: {"errors":[{"id":341,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:09:26 AM [express] GET /api/errors 400 in 1ms :: {"error":"Invalid page parameter"}
  ‚úì   20 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:105:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should handle invalid query parameters gracefully (135ms)
[2m[WebServer] [22m1:09:26 AM [express] POST /api/errors 400 in 33ms :: {"error":"Missing required fields: message and ‚Ä¶
  ‚úì   21 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:136:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors ‚Ä∫ should validate required fields (225ms)
[2m[WebServer] [22m1:09:26 AM [express] POST /api/errors 400 in 1ms :: {"error":"Invalid severity"}
  ‚úì   22 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:151:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors ‚Ä∫ should validate severity values (99ms)
[2m[WebServer] [22m1:09:27 AM [express] POST /api/errors 201 in 7ms :: {"id":352,"fileId":null,"storeNumber":null,"kios‚Ä¶
  ‚úì   23 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:165:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors ‚Ä∫ should set default values for optional fields (49ms)
[2m[WebServer] [22m1:09:27 AM [express] POST /api/errors 201 in 2ms :: {"id":353,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:09:27 AM [express] GET /api/errors/353 200 in 4ms :: {"id":353,"fileId":null,"storeNumber":null,"k‚Ä¶
  ‚úì   24 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:185:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/:id ‚Ä∫ should retrieve specific error by ID (56ms)
[2m[WebServer] [22m1:09:27 AM [express] GET /api/errors/99999999 404 in 2ms :: {"error":"Error not found","message":"Er‚Ä¶
  ‚úì   25 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:208:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/:id ‚Ä∫ should return 404 for non-existent error (98ms)
[2m[WebServer] [22m1:09:27 AM [express] GET /api/errors/invalid-id 400 in 1ms :: {"error":"Invalid error ID","message":‚Ä¶
  ‚úì   26 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:213:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/:id ‚Ä∫ should return 400 for invalid ID format (57ms)
[2m[WebServer] [22m1:09:27 AM [express] POST /api/errors 201 in 2ms :: {"id":354,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:09:27 AM [express] PATCH /api/errors/354 200 in 4ms :: {"id":354,"fileId":null,"storeNumber":null,‚Ä¶
  ‚úì   27 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:220:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ PATCH /api/errors/:id ‚Ä∫ should update error fields (30ms)
[2m[WebServer] [22m1:09:27 AM [express] POST /api/errors 201 in 20ms :: {"id":355,"fileId":null,"storeNumber":null,"kio‚Ä¶
[2m[WebServer] [22m1:09:27 AM [express] PATCH /api/errors/355 400 in 80ms :: {"error":"Invalid severity"}
  ‚úì   28 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:253:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ PATCH /api/errors/:id ‚Ä∫ should validate updated field values (371ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
[2m[WebServer] [22m1:09:28 AM [express] PATCH /api/errors/99999999 404 in 3ms :: {"error":"Error not found"}
  ‚úì   31 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:271:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ PATCH /api/errors/:id ‚Ä∫ should return 404 when updating non-existent error (23ms)
[2m[WebServer] [22m1:09:28 AM [express] GET /api/errors 200 in 5ms :: {"errors":[{"id":352,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m1:09:28 AM [express] POST /api/errors 201 in 4ms :: {"id":356,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:09:28 AM [express] DELETE /api/errors/356 200 in 80ms :: {"message":"Error deleted"}
  ‚úì   29 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:36:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by error type (1.1s)
[2m[WebServer] [22m1:09:29 AM [express] GET /api/errors/356 404 in 1ms :: {"error":"Error not found","message":"Error n‚Ä¶
[2m[WebServer] [22m1:09:29 AM [express] DELETE /api/errors/99999999 404 in 1ms :: {"error":"Error not found"}
  ‚úì   32 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:281:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ DELETE /api/errors/:id ‚Ä∫ should delete error (1.5s)
  ‚úì   33 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:304:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ DELETE /api/errors/:id ‚Ä∫ should return 404 when deleting non-existent error (677ms)
  ‚úì   30 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:47:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by date range (1.8s)
[2m[WebServer] [22m1:09:29 AM [express] GET /api/errors 200 in 1179ms :: {"errors":[{"id":353,"fileId":null,"storeNumbe‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
[2m[WebServer] [22m1:09:29 AM [express] POST /api/errors/bulk 201 in 4ms :: {"created":3,"ids":[357,358,359]}
[2m[WebServer] [22m1:09:29 AM [express] POST /api/errors/bulk 400 in 2ms :: {"error":"Validation failed","invalidIndice‚Ä¶
[2m[WebServer] [22müîç [DEBUG] Error stats requested
  ‚úì   35 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:330:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/bulk ‚Ä∫ should handle validation errors in bulk creation (236ms)
  ‚úì   34 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:311:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/bulk ‚Ä∫ should create multiple errors in bulk (258ms)
[2m[WebServer] [22müîç [DEBUG] Found 343 total errors for user 1
[2m[WebServer] [22müîç [DEBUG] Error stats: {"total":343,"bySeverity":{"high":98,"medium":194,"low":51},"byType":{"Runtime":66,"Database":17,"Network":17,"Test":226,"Unknown":17},"resolved":17,"unresolved":326}
[2m[WebServer] [22m1:09:30 AM [express] GET /api/errors/stats 200 in 393ms :: {"total":343,"bySeverity":{"high":98,"med‚Ä¶
[2m[WebServer] [22müîç [DEBUG] Error stats requested
  ‚úì   36 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:347:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should retrieve error statistics (547ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
[2m[WebServer] [22müîç [DEBUG] Found 343 total errors for user 1
[2m[WebServer] [22müîç [DEBUG] Error stats: {"total":343,"bySeverity":{"high":98,"medium":194,"low":51},"byType":{"Runtime":66,"Database":17,"Network":17,"Test":226,"Unknown":17},"resolved":17,"unresolved":326,"dateRange":{"start":"2025-01-01T00:00:00.000Z","end":"2025-12-31T00:00:00.000Z"}}
[2m[WebServer] [22m1:09:30 AM [express] GET /api/errors/stats 200 in 573ms :: {"total":343,"bySeverity":{"high":98,"med‚Ä¶
  ‚úì   37 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:359:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should filter statistics by date range (959ms)
[2m[WebServer] [22m1:09:31 AM [express] GET /api/errors/stats/by-store 200 in 820ms :: [{"storeNumber":"unknown","total‚Ä¶
[2m[WebServer] [22m1:09:31 AM [express] POST /api/errors/export 200 in 3ms :: [{"id":1,"message":"Test"}]
[2m[WebServer] [22m1:09:31 AM [express] POST /api/errors/export 200 in 1ms
  ‚úì   41 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:392:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/export ‚Ä∫ should export errors as JSON (777ms)
  ‚úì   38 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:369:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should provide statistics by store (1.8s)
  ‚úì   40 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:379:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/export ‚Ä∫ should export errors as CSV (1.4s)
[2m[WebServer] [22m1:09:32 AM [express] GET /api/errors 200 in 494ms :: {"errors":[{"id":357,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:09:32 AM [express] POST /api/errors/export 200 in 3ms
[2m[WebServer] [22m1:09:32 AM [express] GET /api/stores 200 in 2ms :: {"stores":[{"id":1,"storeNumber":"STORE-176409766‚Ä¶
[2m[WebServer] [22m1:09:32 AM [express] GET /api/stores 200 in 1ms :: [{"id":1,"storeNumber":"STORE-1764097667423","nam‚Ä¶
[2m[WebServer] [22m1:09:32 AM [express] POST /api/errors 201 in 7ms :: {"id":361,"fileId":null,"storeNumber":null,"kios‚Ä¶
  ‚úì   45 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:430:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/stores ‚Ä∫ should support pagination for stores (366ms)
  ‚úì   43 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:405:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/export ‚Ä∫ should export errors as Excel (438ms)
  ‚úì   44 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:422:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/stores ‚Ä∫ should retrieve all stores (383ms)
  ‚úì   39 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:91:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should support sorting (2.3s)
  ‚úì   42 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:115:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors ‚Ä∫ should create new error (1.2s)
[2m[WebServer] [22m1:09:32 AM [express] POST /api/stores 201 in 33ms :: {"id":35,"storeNumber":"STORE-1764099572421-932‚Ä¶
[2m[WebServer] [22m1:09:32 AM [express] GET /api/stores 200 in 2ms :: [{"id":1,"storeNumber":"STORE-1764097667423","nam‚Ä¶
[2m[WebServer] [22m1:09:32 AM [express] POST /api/stores 201 in 20ms :: {"id":36,"storeNumber":"STORE-1764099572464-986‚Ä¶
  ‚úì   47 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:446:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/stores ‚Ä∫ should create new store (187ms)
  ‚úì   46 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:438:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/stores ‚Ä∫ should search stores by name (194ms)
[2m[WebServer] [22mError creating store: SqliteError: UNIQUE constraint failed: stores.store_number
[2m[WebServer] [22m    at PreparedQuery.values [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/better-sqlite3/session.ts:156:26[90m)[39m
[2m[WebServer] [22m    at PreparedQuery.all [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/better-sqlite3/session.ts:124:21[90m)[39m
[2m[WebServer] [22m    at QueryPromise.all [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/sqlite-core/query-builders/insert.ts:396:26[90m)[39m
[2m[WebServer] [22m    at QueryPromise.execute [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/sqlite-core/query-builders/insert.ts:408:40[90m)[39m
[2m[WebServer] [22m    at QueryPromise.then [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/query-promise.ts:31:15[90m)[39m
[2m[WebServer] [22m[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
[2m[WebServer] [22m  code: [32m'SQLITE_CONSTRAINT_UNIQUE'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:09:32 AM [express] POST /api/stores 409 in 165ms :: {"message":"Store with this number already exi‚Ä¶
  ‚úì   48 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:463:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/stores ‚Ä∫ should prevent duplicate store numbers (732ms)
[2m[WebServer] [22m1:09:33 AM [express] GET /api/kiosks 200 in 3ms :: []
[2m[WebServer] [22m1:09:33 AM [express] GET /api/kiosks 200 in 1ms :: []
  ‚úì   49 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:481:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/kiosks ‚Ä∫ should retrieve all kiosks (920ms)
  ‚úì   50 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:489:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/kiosks ‚Ä∫ should filter kiosks by store (933ms)
[2m[WebServer] [22m1:09:33 AM [express] POST /api/kiosks 400 in 4ms :: {"error":"Invalid store number - store does not ‚Ä¶
[2m[WebServer] [22m1:09:33 AM [express] POST /api/stores 201 in 19ms :: {"id":37,"storeNumber":"STORE-FOR-KIOSK-1764099‚Ä¶
[2m[WebServer] [22m1:09:33 AM [express] POST /api/ml/train 200 in 3ms :: {"jobId":"ml-job-1764099573717-aog16zk7t","sta‚Ä¶
  ‚úì   51 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:528:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/kiosks ‚Ä∫ should validate kiosk belongs to valid store (521ms)
[2m[WebServer] [22mError creating kiosk: SqliteError: NOT NULL constraint failed: kiosks.name
[2m[WebServer] [22m    at PreparedQuery.values [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/better-sqlite3/session.ts:156:26[90m)[39m
[2m[WebServer] [22m    at PreparedQuery.all [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/better-sqlite3/session.ts:124:21[90m)[39m
[2m[WebServer] [22m    at QueryPromise.all [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/sqlite-core/query-builders/insert.ts:396:26[90m)[39m
[2m[WebServer] [22m    at QueryPromise.execute [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/sqlite-core/query-builders/insert.ts:408:40[90m)[39m
[2m[WebServer] [22m    at QueryPromise.then [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/query-promise.ts:31:15[90m)[39m
[2m[WebServer] [22m[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
[2m[WebServer] [22m  code: [32m'SQLITE_CONSTRAINT_NOTNULL'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:09:33 AM [express] POST /api/kiosks 400 in 14ms :: {"error":"Missing required field: store_id"}
  ‚úì   53 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:546:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ POST /api/ml/train ‚Ä∫ should initiate ML training job (612ms)
  ‚úò   52 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:501:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/kiosks ‚Ä∫ should create new kiosk (586ms)
[2m[WebServer] [22m1:09:33 AM [express] POST /api/ml/train 200 in 1ms :: {"jobId":"ml-job-1764099573976-dygik5cey","sta‚Ä¶
[2m[WebServer] [22m1:09:33 AM [express] POST /api/ml/train 400 in 0ms :: {"error":"Invalid modelType"}
[2m[WebServer] [22m1:09:33 AM [express] POST /api/ml/predict 200 in 7ms :: {"prediction":{"type":"Runtime","severity":"‚Ä¶
  ‚úì   54 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:565:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ POST /api/ml/train ‚Ä∫ should validate training configuration (603ms)
[2m[WebServer] [22m1:09:34 AM [express] GET /api/ml/models 200 in 1ms :: [{"id":"model-1","name":"Production Model v1",‚Ä¶
[2m[WebServer] [22m1:09:34 AM [express] GET /api/ml/jobs/ml-job-1764099573976-dygik5cey 200 in 2ms :: {"jobId":"ml-job-‚Ä¶
  ‚úì   56 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:605:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ POST /api/ml/predict ‚Ä∫ should make prediction with trained model (322ms)
  ‚úì   55 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:579:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ GET /api/ml/jobs/:jobId ‚Ä∫ should retrieve training job status (616ms)
[2m[WebServer] [22m1:09:34 AM [express] POST /api/ai/analyze 200 in 2ms :: {"analysis":"Simulated AI analysis for: unkn‚Ä¶
  ‚úì   59 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:666:9 ‚Ä∫ API Tests - AI Analysis Endpoints ‚Ä∫ POST /api/ai/analyze ‚Ä∫ should handle timeout for long-running analysis (13ms)
  ‚úì   57 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:626:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ GET /api/ml/models ‚Ä∫ should list all trained models (114ms)
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22m1:09:34 AM [express] POST /api/ai/summarize 200 in 1ms :: {"summary":"Simulated summary of multiple ‚Ä¶
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test.xlsx'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099574128-557093340.xlsx'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099574128-557093340.xlsx'[39m,
[2m[WebServer] [22m  size: [33m18[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:09:34 AM [express] POST /api/upload 200 in 11ms :: {"fileId":26,"filename":"test.xlsx","status":"u‚Ä¶
  ‚úì   62 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:718:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should handle Excel file upload (42ms)
  ‚úì   61 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:696:9 ‚Ä∫ API Tests - AI Analysis Endpoints ‚Ä∫ POST /api/ai/summarize ‚Ä∫ should summarize multiple errors (40ms)
[2m[WebServer] [22m1:09:34 AM [express] POST /api/ai/analyze 200 in 13ms :: {"analysis":"Simulated AI analysis for: unk‚Ä¶
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test.exe'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/x-msdownload'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099574180-623395973.exe'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099574180-623395973.exe'[39m,
[2m[WebServer] [22m  size: [33m12[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:09:34 AM [express] POST /api/upload 400 in 4ms :: {"message":"Invalid file type. Only Excel, CSV, ‚Ä¶
  ‚úì   64 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:753:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should reject unsupported file types (32ms)
[2m[WebServer] [22m1:09:34 AM [express] POST /api/ai/suggest 200 in 0ms :: {"suggestions":[{"id":"fix-1","title":"Fix N‚Ä¶
  ‚úì   58 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:648:9 ‚Ä∫ API Tests - AI Analysis Endpoints ‚Ä∫ POST /api/ai/analyze ‚Ä∫ should analyze error with AI (211ms)
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test.csv'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'text/csv'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099574258-803917392.csv'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099574258-803917392.csv'[39m,
[2m[WebServer] [22m  size: [33m4[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:09:34 AM [express] POST /api/upload 200 in 8ms :: {"fileId":27,"filename":"test.csv","status":"upl‚Ä¶
[2m[WebServer] [22m1:09:34 AM [express] GET /api/uploads/27 200 in 2ms :: {"fileId":27,"status":"pending","processedRow‚Ä¶
[2m[WebServer] [22m[DEBUG] verifyFirebaseToken called with token: 'valid-test-token'
[2m[WebServer] [22m[DEBUG] NODE_ENV: 'test'
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m1:09:34 AM [express] POST /api/auth/firebase 200 in 58ms :: {"userId":1,"user":{"id":1,"username":"T‚Ä¶
  ‚úì   65 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:771:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ GET /api/uploads/:fileId ‚Ä∫ should retrieve upload status (178ms)
[2m[WebServer] [22m[DEBUG] verifyFirebaseToken called with token: 'invalid-token'
[2m[WebServer] [22m[DEBUG] NODE_ENV: 'test'
[2m[WebServer] [22m1:09:34 AM [express] POST /api/auth/firebase 401 in 1ms :: {"message":"Invalid Firebase token"}
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mToken verification failed: Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
  ‚úì   60 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:677:9 ‚Ä∫ API Tests - AI Analysis Endpoints ‚Ä∫ POST /api/ai/suggest ‚Ä∫ should provide fix suggestions (389ms)
  ‚úì   67 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:810:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/firebase ‚Ä∫ should reject invalid token (431ms)
  ‚úò   66 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:796:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/firebase ‚Ä∫ should authenticate with valid Firebase token (689ms)
[2m[WebServer] [22m[DEBUG] verifyFirebaseToken called with token: 'valid-token'
[2m[WebServer] [22m[DEBUG] NODE_ENV: 'test'
[2m[WebServer] [22mToken verification failed: Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
[2m[WebServer] [22m1:09:35 AM [express] POST /api/auth/firebase 401 in 9ms :: {"message":"Invalid Firebase token"}
[2m[WebServer] [22m1:09:35 AM [express] GET /api/admin/users 401 in 1ms :: {"message":"Authentication required"}
[2m[WebServer] [22m1:09:35 AM [express] POST /api/auth/logout 200 in 1ms :: {"message":"Logged out successfully"}
  ‚úì   69 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:842:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ GET /api/admin/users ‚Ä∫ should require admin role (180ms)
  ‚úì   68 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:822:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/logout ‚Ä∫ should logout user (419ms)
[2m[WebServer] [22m1:09:35 AM [express] POST /api/errors 400 in 5ms :: {"error":"Missing required fields: message and s‚Ä¶
  ‚úì   70 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:882:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should reject requests with invalid Content-Type (99ms)
[2m[WebServer] [22m‚ùå Server error: SyntaxError: Unexpected token '"', ""{invalid json}"" is not valid JSON
[2m[WebServer] [22m    at JSON.parse (<anonymous>)
[2m[WebServer] [22m    at createStrictSyntaxError [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mbody-parser[24m/lib/types/json.js:169:10[90m)[39m
[2m[WebServer] [22m    at parse [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mbody-parser[24m/lib/types/json.js:86:15[90m)[39m
[2m[WebServer] [22m    at [90m/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mbody-parser[24m/lib/read.js:128:18
[2m[WebServer] [22m[90m    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)[39m
[2m[WebServer] [22m    at invokeCallback [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mraw-body[24m/index.js:238:16[90m)[39m
[2m[WebServer] [22m    at done [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mraw-body[24m/index.js:227:7[90m)[39m
[2m[WebServer] [22m    at IncomingMessage.onEnd [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mraw-body[24m/index.js:287:7[90m)[39m
[2m[WebServer] [22m[90m    at IncomingMessage.emit (node:events:518:28)[39m
[2m[WebServer] [22m[90m    at endReadableNT (node:internal/streams/readable:1698:12)[39m {
[2m[WebServer] [22m  expose: [33mtrue[39m,
[2m[WebServer] [22m  statusCode: [33m400[39m,
[2m[WebServer] [22m  status: [33m400[39m,
[2m[WebServer] [22m  body: [32m'"{invalid json}"'[39m,
[2m[WebServer] [22m  type: [32m'entity.parse.failed'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:09:35 AM [express] POST /api/upload 400 in 1026ms :: {"message":"File too large"}
  ‚úò   63 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:737:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should reject files exceeding size limit (1.4s)
  ‚úì   71 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:893:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should validate JSON syntax (244ms)
[2m[WebServer] [22m1:09:35 AM [express] POST /api/errors 400 in 1ms :: {"error":"Missing required fields: message and s‚Ä¶
  ‚úì   73 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:929:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should handle missing request body (33ms)
  ‚úò   72 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:904:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should enforce maximum payload size (244ms)
[2m[WebServer] [22m1:09:35 AM [express] POST /api/errors 201 in 33ms :: {"id":362,"fileId":null,"storeNumber":null,"kio‚Ä¶
  ‚úò   74 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:935:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should validate URL parameter formats (1.3s)
[2m[WebServer] [22m1:09:37 AM [express] GET /api/errors 200 in 1231ms :: {"errors":[{"id":362,"fileId":null,"storeNumbe‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
[2m[WebServer] [22m1:09:41 AM [express] GET /api/ml/models 200 in 4ms :: [{"id":"model-1","name":"Production Model v1",‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
  ‚úì   75 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:634:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ GET /api/ml/models ‚Ä∫ should filter models by status (407ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
[2m[WebServer] [22m[DEBUG] verifyFirebaseToken called with token: 'header.eyJlbWFpbCI6InRlc3RAc3RhY2tsZW5zLmFpIiwic3ViIjoiYWRtaW4tdXNlciIsIm5hbWUiOiJBZG1pbiBVc2VyIiwicGljdHVyZSI6Imh0dHBzOi8vZXhhbXBsZS5jb20vYXZhdGFyLmpwZyJ9.signature'
[2m[WebServer] [22m[DEBUG] NODE_ENV: 'test'
[2m[WebServer] [22mToken verification failed: Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
[2m[WebServer] [22m‚úÖ Using mock token for user: test@stacklens.ai
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m1:09:44 AM [express] POST /api/auth/firebase-signin 200 in 18ms :: {"user":{"id":1,"username":"Test ‚Ä¶
Auth response: {
  user: {
    id: [33m1[39m,
    username: [32m'Test User'[39m,
    email: [32m'test@stacklens.ai'[39m,
    role: [32m'admin'[39m,
    firstName: [32m'Test'[39m,
    lastName: [32m'User'[39m,
    profileImageUrl: [32m'https://example.com/avatar.jpg'[39m,
    department: [1mnull[22m,
    isActive: [33mtrue[39m,
    lastLogin: [32m'2025-11-25T19:39:44.000Z'[39m,
    createdAt: [32m'+057872-01-12T00:20:00.000Z'[39m,
    updatedAt: [32m'+057872-01-12T00:20:00.000Z'[39m
  },
  token: [32m'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImlhdCI6MTc2NDA5OTU4NCwiZXhwIjoxNzY0MTg1OTg0fQ.7NuW8hRHAPPpmZJ4NRN5NzpgM3611C8u0CsWrMCtvFM'[39m,
  provider: [32m'firebase'[39m
}
  ‚úì   76 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:959:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should include CORS headers (2.6s)
[2m[WebServer] [22m1:09:44 AM [express] GET /api/errors 200 in 2488ms :: {"errors":[{"id":362,"fileId":null,"storeNumbe‚Ä¶
  ‚úì   77 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:918:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should validate required headers (2.7s)
[2m[WebServer] [22m1:09:45 AM [express] GET /api/errors 200 in 231ms :: {"errors":[],"total":0,"page":1,"limit":20,"tot‚Ä¶
[2m[WebServer] [22m1:09:45 AM [express] GET /api/errors 200 in 1874ms :: {"errors":[{"id":362,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m1:09:45 AM [express] GET /api/admin/users 200 in 2ms :: [{"id":1,"username":"Test User","email":"tes‚Ä¶
  ‚úì   79 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:941:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should handle special characters in query params (2.8s)
[2m[WebServer] [22m1:09:45 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   81 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:970:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should return consistent error response format (338ms)
  ‚úì   78 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:849:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ GET /api/admin/users ‚Ä∫ should allow access with admin token (2.8s)
[2m[WebServer] [22m1:09:45 AM [express] GET /api/errors 200 in 209ms :: {"errors":[{"id":362,"fileId":null,"storeNumber‚Ä¶
  ‚úì   82 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:980:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should include pagination metadata (432ms)
[2m[WebServer] [22m1:09:45 AM [express] GET /api/nonexistent 404 in 356ms
[2m[WebServer] [22m1:09:45 AM [express] GET /api/errors/not-a-number 400 in 1ms :: {"error":"Invalid error ID","message‚Ä¶
  ‚úì   85 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1014:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should return 404 for non-existent routes (590ms)
  ‚úì   84 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1006:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should handle database connection errors gracefully (588ms)
  ‚úì   80 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:952:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should return proper Content-Type headers (2.7s)
[2m[WebServer] [22m1:09:45 AM [express] GET /api/errors 200 in 507ms :: {"errors":[{"id":362,"fileId":null,"storeNumber‚Ä¶
  ‚úì   86 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1020:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should handle malformed route parameters (575ms)
[2m[WebServer] [22m1:09:46 AM [express] GET /api/errors 200 in 537ms :: {"errors":[{"id":362,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:09:46 AM [express] POST /api/errors 400 in 1ms :: {"error":"Missing required fields: message and s‚Ä¶
[2m[WebServer] [22m1:09:46 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úò   87 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1026:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should provide helpful error messages (491ms)
[2m[WebServer] [22m1:09:46 AM [express] GET /api/errors 200 in 793ms :: {"errors":[{"id":362,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:09:46 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:09:46 AM [express] GET /api/errors/999999 404 in 3ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:09:46 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   83 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:992:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should return timestamps in ISO format (1.2s)
[2m[WebServer] [22m1:09:46 AM [express] GET /api/errors/999999 404 in 3ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:09:46 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 3ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   90 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1068:5 ‚Ä∫ API Tests - Rate Limiting ‚Ä∫ should include rate limit headers (1.2s)
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 3ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   91 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1104:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle page=0 (1.0s)
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors 200 in 1075ms :: {"errors":[{"id":362,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors 200 in 720ms :: {"errors":[{"id":362,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors 400 in 0ms :: {"error":"Invalid page parameter"}
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   92 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1111:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle negative page numbers (199ms)
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors 200 in 207ms :: {"errors":[],"total":345,"page":999999,"limit":‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 8ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   93 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1117:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle excessive page numbers (238ms)
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors 200 in 419ms :: {"errors":[{"id":362,"fileId":null,"storeNumber‚Ä¶
  ‚úò   94 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1127:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle limit=0 (299ms)
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors 200 in 90ms :: {"errors":[{"id":362,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors 400 in 0ms :: {"error":"Invalid limit parameter"}
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:09:47 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   95 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1133:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should enforce maximum limit (127ms)
  ‚úì   88 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1038:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should handle concurrent request failures (2.1s)
[2m[WebServer] [22m1:09:48 AM [express] POST /api/errors 201 in 3ms :: {"id":363,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:09:48 AM [express] POST /api/errors 201 in 2ms :: {"id":364,"fileId":null,"storeNumber":null,"kios‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
[2m[WebServer] [22m1:09:49 AM [express] PUT /api/errors/364 404 in 408ms
[2m[WebServer] [22m1:09:49 AM [express] PUT /api/errors/364 404 in 407ms
[2m[WebServer] [22m1:09:49 AM [express] PUT /api/errors/364 404 in 407ms
[2m[WebServer] [22m1:09:49 AM [express] PUT /api/errors/364 404 in 406ms
[2m[WebServer] [22m1:09:49 AM [express] PUT /api/errors/364 404 in 403ms
  ‚úò   97 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1175:5 ‚Ä∫ API Tests - Concurrent Operations ‚Ä∫ should prevent race conditions on updates (1.3s)
[2m[WebServer] [22m1:09:49 AM [express] GET /api/errors 200 in 1410ms :: {"errors":[{"id":362,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m1:09:49 AM [express] GET /api/errors 200 in 1180ms :: {"errors":[{"id":363,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m1:09:49 AM [express] GET /api/errors 200 in 525ms :: {"errors":[{"id":363,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:09:49 AM [express] GET /api/errors 200 in 273ms :: {"errors":[{"id":363,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:09:49 AM [express] GET /api/errors 200 in 601ms :: {"errors":[{"id":363,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:09:49 AM [express] GET /api/errors 200 in 347ms :: {"errors":[{"id":363,"fileId":null,"storeNumber‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
[2m[WebServer] [22m1:09:51 AM [express] GET /api/errors 200 in 1464ms :: {"errors":[{"id":363,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m1:09:51 AM [express] GET /api/errors 200 in 1881ms :: {"errors":[{"id":363,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m1:09:52 AM [express] GET /api/errors 200 in 1859ms :: {"errors":[{"id":363,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m1:09:52 AM [express] GET /api/errors 200 in 884ms :: {"errors":[{"id":363,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:09:52 AM [express] GET /api/errors 200 in 1332ms :: {"errors":[{"id":363,"fileId":null,"storeNumbe‚Ä¶
