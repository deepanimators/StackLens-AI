FROM python:3.11-slim\n\nWORKDIR /app\n\n# Install system dependencies\nRUN apt-get update && apt-get install -y \\\n    curl \\\n    postgresql-client \\\n    gcc \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Copy requirements\nCOPY python-services/requirements-phase4.txt .\n\n# Install Python dependencies\nRUN pip install --no-cache-dir -r requirements-phase4.txt\n\n# Copy application code\nCOPY python-services/analytics_service.py .\n\n# Create logs directory\nRUN mkdir -p /app/logs\n\n# Health check endpoint\nRUN pip install --no-cache-dir flask\n\n# Expose metrics port\nEXPOSE 8004\n\n# Run the analytics service\nCMD [\"python\", \"-u\", \"analytics_service.py\"]\n