
> stacklens-ai-platform@1.0.0 test:api
> playwright test tests/api

[dotenv@17.2.3] injecting env (14) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
[2m[WebServer] [22m
[2m[WebServer] [22m> stacklens-ai-platform@1.0.0 test:server /Users/deepak/Downloads/Projects/StackLens-AI-Deploy
[2m[WebServer] [22m> cross-env NODE_ENV=test node --import tsx --no-warnings apps/api/src/index.ts
[2m[WebServer] [22m
[2m[WebServer] [22m[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
[2m[WebServer] [22mü§ñ AI Service initialized with 1 providers: gemini
[2m[WebServer] [22m[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
[2m[WebServer] [22m[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
[2m[WebServer] [22müöÄ RAG: Vector database initialized
[2m[WebServer] [22m{"level":"WARN","timestamp":"2025-11-25T19:30:14.408Z","logger":"kafkajs","message":"KafkaJS v2.0.0 switched default partitioner. To retain the same partitioning behavior as in previous versions, create the producer with the option \"createPartitioner: Partitioners.LegacyPartitioner\". See the migration guide at https://kafka.js.org/docs/migration-guide-v2.0.0#producer-new-default-partitioner for details. Silence this warning by setting the environment variable \"KAFKAJS_NO_PARTITIONER_WARNING=1\""}
[2m[WebServer] [22mSetting up SQLite database...
[2m[WebServer] [22m‚úÖ SQLite database initialized successfully
[2m[WebServer] [22müîÑ Starting server initialization...
[2m[WebServer] [22m‚úÖ Database tables initialized
[2m[WebServer] [22mStarting LogWatcher service for real-time monitoring...
[2m[WebServer] [22müìç Watching directories: /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/data, /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/logs
[2m[WebServer] [22m[LogWatcherService] Started watching 2 file(s)
[2m[WebServer] [22m‚úÖ LogWatcher service started successfully
[2m[WebServer] [22m‚úÖ Routes registered successfully
[2m[WebServer] [22müìö RAG: Indexing 50 resolved error patterns...
[2m[WebServer] [22m‚úÖ RAG: Knowledge base populated with 50 patterns
[2m[WebServer] [22m1:00:15 AM [express] serving on port 4001
[2m[WebServer] [22müîÑ Indexing existing errors for RAG system...
[2m[WebServer] [22m‚ÑπÔ∏è No errors with suggestions found for indexing
[2m[WebServer] [22m‚úÖ Enhanced RAG Suggestor initialized
[2m[WebServer] [22müéØ Enhanced RAG system ready with vector database
[2m[WebServer] [22müöÄ Starting Python vector database service...
[2m[WebServer] [22m‚úÖ Vector database service initialized
[2m[WebServer] [22m‚ö†Ô∏è Enhanced vector service not found, using fallback similarity search

Running 102 tests using 5 workers

[dotenv@17.2.3] injecting env (0) from .env -- tip: üõ†Ô∏è  run anywhere with `dotenvx run -- yourcommand`
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
‚úì Auth state file verified
Starting authentication setup...
  ‚úì    2 [setup] ‚Ä∫ tests/auth.setup.ts:135:1 ‚Ä∫ verify auth state (658ms)
Using TEST_FIREBASE_TOKEN for authentication...
[2m[WebServer] [22m‚ö†Ô∏è Token verification failed - likely expired. Attempting to decode without verification for development mode...
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m1:00:23 AM [express] POST /api/auth/firebase-signin 200 in 497ms :: {"user":{"id":1,"username":"Test‚Ä¶
‚úì Token exchange successful
[2m[WebServer] [22m1:00:23 AM [express] GET /api/auth/me 200 in 1ms :: {"id":1,"email":"test@stacklens.ai","username":"‚Ä¶
[2m[WebServer] [22m1:00:23 AM [express] GET /api/admin/api-settings 200 in 3ms :: {"geminiApiKey":"AIzaSyAOu2YCkjimtYsv‚Ä¶
[2m[WebServer] [22m1:00:23 AM [express] GET /api/admin/ui-settings 200 in 2ms :: {"theme":"light","sidebarCollapsed":fa‚Ä¶
‚úì Authentication successful with session token
‚úì Authentication state saved to /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/.auth/user.json
  ‚úì    1 [setup] ‚Ä∫ tests/auth.setup.ts:15:1 ‚Ä∫ authenticate user (3.8s)
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
[2m[WebServer] [22mToken verification failed: Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
[2m[WebServer] [22m1:00:27 AM [express] POST /api/auth/firebase-signin 401 in 8ms :: {"message":"Invalid Firebase token‚Ä¶
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m1:00:27 AM [express] POST /api/auth/firebase-verify 200 in 9ms :: {"valid":true,"user":{"id":1,"user‚Ä¶
  ‚úì    4 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:54:5 ‚Ä∫ Authentication API ‚Ä∫ POST /api/auth/firebase-signin - should reject invalid token (151ms)
  ‚úì    3 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:27:5 ‚Ä∫ Authentication API ‚Ä∫ POST /api/auth/firebase-verify - should verify token (238ms)
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test-errors.xlsx'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099027437-603604016.xlsx'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099027437-603604016.xlsx'[39m,
[2m[WebServer] [22m  size: [33m9[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:00:27 AM [express] POST /api/upload 200 in 36ms :: {"fileId":7,"filename":"test-errors.xlsx","stat‚Ä¶
  ‚úì    8 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:84:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should upload Excel file (92ms)
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m1:00:27 AM [express] POST /api/auth/firebase-signin 200 in 11ms :: {"user":{"id":1,"username":"Test ‚Ä¶
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22m1:00:27 AM [express] GET /api/auth/me 200 in 1ms :: {"id":1,"email":"test@stacklens.ai","username":"‚Ä¶
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test.pdf'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/pdf'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099027506-935016299.pdf'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099027506-935016299.pdf'[39m,
[2m[WebServer] [22m  size: [33m9[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:00:27 AM [express] POST /api/upload 400 in 10ms :: {"message":"Invalid file type. Only Excel, CSV,‚Ä¶
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test-errors.csv'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'text/csv'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099027509-650679448.csv'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099027509-650679448.csv'[39m,
[2m[WebServer] [22m  size: [33m33[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:00:27 AM [express] POST /api/upload 200 in 8ms :: {"fileId":8,"filename":"test-errors.csv","status‚Ä¶
  ‚úì    7 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:11:5 ‚Ä∫ Authentication API ‚Ä∫ POST /api/auth/firebase-signin - should authenticate user (177ms)
  ‚úì   10 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:119:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should reject invalid file type (50ms)
  ‚úì    9 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:104:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should upload CSV file (113ms)
  ‚úì    6 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:42:5 ‚Ä∫ Authentication API ‚Ä∫ GET /api/auth/me - should return current user (256ms)
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'list-test.xlsx'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099027567-845958062.xlsx'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099027567-845958062.xlsx'[39m,
[2m[WebServer] [22m  size: [33m9[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:00:27 AM [express] POST /api/upload 200 in 37ms :: {"fileId":9,"filename":"list-test.xlsx","status‚Ä¶
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mSkipping body parsing for: /api/files
[2m[WebServer] [22m1:00:27 AM [express] GET /api/files 200 in 10ms :: {"files":[{"id":7,"filename":"file-1764099027437-‚Ä¶
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test.xlsx'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099027614-464015726.xlsx'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099027614-464015726.xlsx'[39m,
[2m[WebServer] [22m  size: [33m4[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:00:27 AM [express] POST /api/upload 200 in 37ms :: {"fileId":10,"filename":"test.xlsx","status":"u‚Ä¶
[2m[WebServer] [22m1:00:27 AM [express] GET /api/auth/me 401 in 4ms :: {"message":"Authentication required"}
[2m[WebServer] [22mSkipping body parsing for: /api/files/10
  ‚úò   11 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:138:5 ‚Ä∫ File Upload API ‚Ä∫ GET /api/files - should list uploaded files (138ms)
[2m[WebServer] [22müóëÔ∏è Attempting to delete file with ID: 10
[2m[WebServer] [22müìÅ File found: test.xlsx (file-1764099027614-464015726.xlsx)
[2m[WebServer] [22müîÑ Starting comprehensive cascade deletion process...
[2m[WebServer] [22müîç Finding error logs for file...
[2m[WebServer] [22m‚ùå Error deleting file: TypeError: Transaction function cannot return a promise
[2m[WebServer] [22m    at Function.sqliteTransaction [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mbetter-sqlite3[24m/lib/methods/transaction.js:67:10[90m)[39m
[2m[WebServer] [22m    at BetterSQLiteSession.transaction [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/better-sqlite3/session.ts:68:48[90m)[39m
[2m[WebServer] [22m    at BetterSQLite3Database.transaction [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/sqlite-core/db.ts:589:23[90m)[39m
[2m[WebServer] [22m    at <anonymous> [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mapps/api/src/routes/main-routes.ts:4850:39[90m)[39m
[2m[WebServer] [22m[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m
[2m[WebServer] [22müîç Error stack: TypeError: Transaction function cannot return a promise
[2m[WebServer] [22m    at Function.sqliteTransaction (/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/node_modules/better-sqlite3/lib/methods/transaction.js:67:10)
[2m[WebServer] [22m    at BetterSQLiteSession.transaction (/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/node_modules/src/better-sqlite3/session.ts:68:48)
[2m[WebServer] [22m    at BetterSQLite3Database.transaction (/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/node_modules/src/sqlite-core/db.ts:589:23)
[2m[WebServer] [22m    at <anonymous> (/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/apps/api/src/routes/main-routes.ts:4850:39)
[2m[WebServer] [22m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[2m[WebServer] [22müìä Found 0 error logs to clean up
[2m[WebServer] [22müìã Deleting error logs...
[2m[WebServer] [22müìà Deleting analysis history...
[2m[WebServer] [22müìÑ Deleting file record...
[2m[WebServer] [22m1:00:27 AM [express] DELETE /api/files/10 500 in 174ms :: {"message":"Failed to delete file due to i‚Ä¶
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test.xlsx'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099027920-907103810.xlsx'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099027920-907103810.xlsx'[39m,
[2m[WebServer] [22m  size: [33m4[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
  ‚úì    5 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:68:5 ‚Ä∫ Authentication API ‚Ä∫ GET /api/auth/me - should reject unauthenticated request (467ms)
  ‚úò   13 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:190:5 ‚Ä∫ File Upload API ‚Ä∫ DELETE /api/files/:id - should delete file (781ms)
[2m[WebServer] [22m1:00:28 AM [express] POST /api/upload 200 in 495ms :: {"fileId":11,"filename":"test.xlsx","status":"‚Ä¶
[2m[WebServer] [22mSkipping body parsing for: /api/files/11
[2m[WebServer] [22m1:00:28 AM [express] GET /api/files/11 200 in 1ms :: {"id":11,"filename":"test.xlsx","status":"pendi‚Ä¶
[2m[WebServer] [22m1:00:28 AM [express] GET /api/errors 200 in 2ms :: {"errors":[],"total":0,"page":1,"limit":20,"total‚Ä¶
  ‚úì   15 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:25:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by severity (113ms)
[2m[WebServer] [22m1:00:28 AM [express] GET /api/errors 200 in 152ms :: {"errors":[{"id":297,"fileId":null,"storeNumber‚Ä¶
  ‚úì   12 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:165:5 ‚Ä∫ File Upload API ‚Ä∫ GET /api/files/:id - should get file details (1.1s)
  ‚úì   14 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:5:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should retrieve all errors (824ms)
[2m[WebServer] [22m1:00:30 AM [express] GET /api/errors 200 in 1073ms :: {"errors":[{"id":297,"fileId":null,"storeNumbe‚Ä¶
  ‚úò   17 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:69:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by resolved status (1.5s)
[2m[WebServer] [22m1:00:30 AM [express] GET /api/errors 200 in 204ms :: {"errors":[{"id":294,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:30 AM [express] GET /api/errors 200 in 730ms :: {"errors":[{"id":297,"fileId":null,"storeNumber‚Ä¶
  ‚úò   18 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:58:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should search by message (2.1s)
  ‚úì   16 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:47:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by date range (2.3s)
[2m[WebServer] [22m1:00:31 AM [express] GET /api/errors 400 in 1ms :: {"error":"Invalid page parameter"}
  ‚úì   19 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:105:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should handle invalid query parameters gracefully (86ms)
[2m[WebServer] [22m1:00:32 AM [express] POST /api/errors 201 in 96ms :: {"id":308,"fileId":null,"storeNumber":null,"kio‚Ä¶
  ‚úì   20 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:115:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors ‚Ä∫ should create new error (799ms)
[2m[WebServer] [22m1:00:32 AM [express] POST /api/errors 400 in 40ms :: {"error":"Missing required fields: message and ‚Ä¶
  ‚úì   21 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:136:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors ‚Ä∫ should validate required fields (552ms)
[2m[WebServer] [22m1:00:33 AM [express] POST /api/errors 400 in 1ms :: {"error":"Invalid severity"}
  ‚úì   22 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:151:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors ‚Ä∫ should validate severity values (312ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
[2m[WebServer] [22m1:00:33 AM [express] POST /api/errors 201 in 3ms :: {"id":309,"fileId":null,"storeNumber":null,"kios‚Ä¶
  ‚úì   23 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:165:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors ‚Ä∫ should set default values for optional fields (241ms)
[2m[WebServer] [22m1:00:33 AM [express] POST /api/errors 201 in 2ms :: {"id":310,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:00:33 AM [express] GET /api/errors/310 200 in 2ms :: {"id":310,"fileId":null,"storeNumber":null,"k‚Ä¶
  ‚úì   24 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:185:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/:id ‚Ä∫ should retrieve specific error by ID (49ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
[2m[WebServer] [22m1:00:33 AM [express] GET /api/errors/99999999 404 in 2ms :: {"error":"Error not found","message":"Er‚Ä¶
  ‚úì   26 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:208:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/:id ‚Ä∫ should return 404 for non-existent error (75ms)
[2m[WebServer] [22m1:00:33 AM [express] GET /api/errors/invalid-id 400 in 1ms :: {"error":"Invalid error ID","message":‚Ä¶
  ‚úì   27 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:213:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/:id ‚Ä∫ should return 400 for invalid ID format (49ms)
[2m[WebServer] [22m1:00:33 AM [express] POST /api/errors 201 in 2ms :: {"id":311,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:00:33 AM [express] PATCH /api/errors/311 200 in 2ms :: {"id":311,"fileId":null,"storeNumber":null,‚Ä¶
  ‚úì   29 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:220:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ PATCH /api/errors/:id ‚Ä∫ should update error fields (34ms)
[2m[WebServer] [22m1:00:33 AM [express] GET /api/errors 200 in 83ms :: {"errors":[{"id":309,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:00:33 AM [express] POST /api/errors 201 in 2ms :: {"id":312,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:00:33 AM [express] GET /api/errors 200 in 2ms :: {"errors":[{"id":309,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m1:00:33 AM [express] PATCH /api/errors/312 400 in 1ms :: {"error":"Invalid severity"}
  ‚úì   30 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:253:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ PATCH /api/errors/:id ‚Ä∫ should validate updated field values (89ms)
  ‚úì   28 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:13:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should support pagination (193ms)
[2m[WebServer] [22m1:00:33 AM [express] PATCH /api/errors/99999999 404 in 1ms :: {"error":"Error not found"}
  ‚úì   25 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:36:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by error type (394ms)
  ‚úì   31 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:271:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ PATCH /api/errors/:id ‚Ä∫ should return 404 when updating non-existent error (36ms)
[2m[WebServer] [22m1:00:33 AM [express] POST /api/errors 201 in 2ms :: {"id":313,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:00:33 AM [express] DELETE /api/errors/313 200 in 2ms :: {"message":"Error deleted"}
[2m[WebServer] [22m1:00:33 AM [express] GET /api/errors/313 404 in 2ms :: {"error":"Error not found","message":"Error n‚Ä¶
[2m[WebServer] [22m1:00:33 AM [express] POST /api/errors/bulk 201 in 4ms :: {"created":3,"ids":[314,315,316]}
  ‚úì   32 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:281:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ DELETE /api/errors/:id ‚Ä∫ should delete error (57ms)
[2m[WebServer] [22m1:00:33 AM [express] DELETE /api/errors/99999999 404 in 2ms :: {"error":"Error not found"}
  ‚úì   34 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:311:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/bulk ‚Ä∫ should create multiple errors in bulk (23ms)
  ‚úì   33 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:304:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ DELETE /api/errors/:id ‚Ä∫ should return 404 when deleting non-existent error (37ms)
[2m[WebServer] [22m1:00:34 AM [express] GET /api/errors/stats 400 in 0ms :: {"error":"Invalid error ID","message":"Inva‚Ä¶
[2m[WebServer] [22m1:00:34 AM [express] POST /api/errors/bulk 400 in 2ms :: {"error":"Validation failed","invalidIndice‚Ä¶
[2m[WebServer] [22m1:00:34 AM [express] GET /api/errors/stats 400 in 1ms :: {"error":"Invalid error ID","message":"Inva‚Ä¶
  ‚úò   36 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:347:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should retrieve error statistics (21ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
  ‚úì   35 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:330:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/bulk ‚Ä∫ should handle validation errors in bulk creation (31ms)
  ‚úò   37 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:359:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should filter statistics by date range (27ms)
[2m[WebServer] [22m1:00:34 AM [express] POST /api/errors/export 200 in 2ms
  ‚úì   38 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:379:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/export ‚Ä∫ should export errors as CSV (28ms)
[2m[WebServer] [22m1:00:34 AM [express] POST /api/errors/export 200 in 1ms
  ‚úì   39 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:405:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/export ‚Ä∫ should export errors as Excel (34ms)
[2m[WebServer] [22m1:00:34 AM [express] GET /api/stores 200 in 3ms :: [{"id":1,"storeNumber":"STORE-1764097667423","nam‚Ä¶
  ‚úì   41 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:422:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/stores ‚Ä∫ should retrieve all stores (36ms)
[2m[WebServer] [22m1:00:34 AM [express] GET /api/stores 200 in 1ms :: {"stores":[{"id":1,"storeNumber":"STORE-176409766‚Ä¶
[2m[WebServer] [22m1:00:34 AM [express] GET /api/errors 200 in 2ms :: {"errors":[],"total":0,"page":1,"limit":20,"total‚Ä¶
  ‚úì   42 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:430:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/stores ‚Ä∫ should support pagination for stores (16ms)
  ‚úì   40 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:80:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by store (97ms)
[2m[WebServer] [22m1:00:34 AM [express] GET /api/stores 200 in 1ms :: [{"id":1,"storeNumber":"STORE-1764097667423","nam‚Ä¶
  ‚úì   43 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:438:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/stores ‚Ä∫ should search stores by name (14ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
[2m[WebServer] [22m1:00:34 AM [express] POST /api/stores 201 in 3ms :: {"id":29,"storeNumber":"STORE-1764099034218-628"‚Ä¶
[2m[WebServer] [22m1:00:34 AM [express] POST /api/stores 201 in 3ms :: {"id":30,"storeNumber":"STORE-1764099034226-699"‚Ä¶
  ‚úì   44 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:446:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/stores ‚Ä∫ should create new store (20ms)
[2m[WebServer] [22mError creating store: SqliteError: UNIQUE constraint failed: stores.store_number
[2m[WebServer] [22m    at PreparedQuery.values [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/better-sqlite3/session.ts:156:26[90m)[39m
[2m[WebServer] [22m    at PreparedQuery.all [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/better-sqlite3/session.ts:124:21[90m)[39m
[2m[WebServer] [22m    at QueryPromise.all [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/sqlite-core/query-builders/insert.ts:396:26[90m)[39m
[2m[WebServer] [22m    at QueryPromise.execute [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/sqlite-core/query-builders/insert.ts:408:40[90m)[39m
[2m[WebServer] [22m    at QueryPromise.then [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/query-promise.ts:31:15[90m)[39m
[2m[WebServer] [22m[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
[2m[WebServer] [22m  code: [32m'SQLITE_CONSTRAINT_UNIQUE'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:00:34 AM [express] POST /api/stores 409 in 2ms :: {"message":"Store with this number already exist‚Ä¶
  ‚úì   45 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:463:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/stores ‚Ä∫ should prevent duplicate store numbers (27ms)
[2m[WebServer] [22m1:00:34 AM [express] GET /api/kiosks 200 in 2ms :: []
[2m[WebServer] [22m1:00:34 AM [express] GET /api/kiosks 200 in 0ms :: []
  ‚úì   46 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:481:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/kiosks ‚Ä∫ should retrieve all kiosks (23ms)
  ‚úì   47 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:489:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/kiosks ‚Ä∫ should filter kiosks by store (11ms)
[2m[WebServer] [22m1:00:34 AM [express] POST /api/kiosks 400 in 1ms :: {"error":"Invalid store number - store does not ‚Ä¶
[2m[WebServer] [22m1:00:34 AM [express] POST /api/stores 201 in 2ms :: {"id":31,"storeNumber":"STORE-FOR-KIOSK-17640990‚Ä¶
  ‚úì   50 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:528:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/kiosks ‚Ä∫ should validate kiosk belongs to valid store (14ms)
[2m[WebServer] [22mError creating kiosk: SqliteError: NOT NULL constraint failed: kiosks.name
[2m[WebServer] [22m    at PreparedQuery.values [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/better-sqlite3/session.ts:156:26[90m)[39m
[2m[WebServer] [22m    at PreparedQuery.all [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/better-sqlite3/session.ts:124:21[90m)[39m
[2m[WebServer] [22m    at QueryPromise.all [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/sqlite-core/query-builders/insert.ts:396:26[90m)[39m
[2m[WebServer] [22m    at QueryPromise.execute [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/sqlite-core/query-builders/insert.ts:408:40[90m)[39m
[2m[WebServer] [22m    at QueryPromise.then [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/query-promise.ts:31:15[90m)[39m
[2m[WebServer] [22m[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
[2m[WebServer] [22m  code: [32m'SQLITE_CONSTRAINT_NOTNULL'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:00:34 AM [express] POST /api/kiosks 400 in 3ms :: {"error":"Missing required field: store_id"}
  ‚úò   49 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:501:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/kiosks ‚Ä∫ should create new kiosk (28ms)
[2m[WebServer] [22m1:00:34 AM [express] POST /api/ml/train 200 in 1ms :: {"jobId":"ml-job-1764099034311-n5p1ok98y","sta‚Ä¶
  ‚úì   51 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:546:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ POST /api/ml/train ‚Ä∫ should initiate ML training job (17ms)
[2m[WebServer] [22m1:00:34 AM [express] POST /api/ml/train 200 in 1ms :: {"jobId":"ml-job-1764099034330-r0i8newhp","sta‚Ä¶
[2m[WebServer] [22m1:00:34 AM [express] GET /api/errors 200 in 117ms :: {"errors":[{"id":317,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:34 AM [express] GET /api/ml/jobs/ml-job-1764099034330-r0i8newhp 200 in 2ms :: {"jobId":"ml-job-‚Ä¶
  ‚úì   52 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:579:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ GET /api/ml/jobs/:jobId ‚Ä∫ should retrieve training job status (149ms)
  ‚úì   48 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:91:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should support sorting (203ms)
[2m[WebServer] [22m1:00:34 AM [express] POST /api/ml/predict 200 in 1ms :: {"prediction":{"type":"Runtime","severity":"‚Ä¶
  ‚úì   53 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:605:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ POST /api/ml/predict ‚Ä∫ should make prediction with trained model (32ms)
[2m[WebServer] [22m1:00:34 AM [express] GET /api/ml/models 200 in 1ms :: [{"id":"model-1","name":"Production Model v1",‚Ä¶
[2m[WebServer] [22m1:00:34 AM [express] GET /api/ml/models 200 in 1ms :: [{"id":"model-1","name":"Production Model v1",‚Ä¶
  ‚úì   55 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:634:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ GET /api/ml/models ‚Ä∫ should filter models by status (95ms)
  ‚úì   54 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:626:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ GET /api/ml/models ‚Ä∫ should list all trained models (285ms)
[2m[WebServer] [22m1:00:34 AM [express] POST /api/ai/analyze 200 in 0ms :: {"analysis":"Simulated AI analysis for: unkn‚Ä¶
[2m[WebServer] [22m1:00:34 AM [express] POST /api/ai/analyze 200 in 0ms :: {"analysis":"Simulated AI analysis for: unkn‚Ä¶
  ‚úì   57 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:666:9 ‚Ä∫ API Tests - AI Analysis Endpoints ‚Ä∫ POST /api/ai/analyze ‚Ä∫ should handle timeout for long-running analysis (58ms)
  ‚úì   56 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:648:9 ‚Ä∫ API Tests - AI Analysis Endpoints ‚Ä∫ POST /api/ai/analyze ‚Ä∫ should analyze error with AI (292ms)
[2m[WebServer] [22m1:00:35 AM [express] POST /api/ai/suggest 200 in 1ms :: {"suggestions":[{"id":"fix-1","title":"Fix N‚Ä¶
[2m[WebServer] [22m1:00:35 AM [express] POST /api/ai/summarize 200 in 0ms :: {"summary":"Simulated summary of multiple ‚Ä¶
  ‚úì   59 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:696:9 ‚Ä∫ API Tests - AI Analysis Endpoints ‚Ä∫ POST /api/ai/summarize ‚Ä∫ should summarize multiple errors (18ms)
  ‚úì   58 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:677:9 ‚Ä∫ API Tests - AI Analysis Endpoints ‚Ä∫ POST /api/ai/suggest ‚Ä∫ should provide fix suggestions (160ms)
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test.xlsx'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099035149-811957082.xlsx'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099035149-811957082.xlsx'[39m,
[2m[WebServer] [22m  size: [33m18[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:00:35 AM [express] POST /api/upload 200 in 5ms :: {"fileId":12,"filename":"test.xlsx","status":"up‚Ä¶
  ‚úì   60 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:718:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should handle Excel file upload (21ms)
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test.exe'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'application/x-msdownload'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099035186-852542796.exe'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099035186-852542796.exe'[39m,
[2m[WebServer] [22m  size: [33m12[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:00:35 AM [express] POST /api/upload 400 in 3ms :: {"message":"Invalid file type. Only Excel, CSV, ‚Ä¶
  ‚úì   62 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:753:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should reject unsupported file types (23ms)
[2m[WebServer] [22mSkipping body parsing for: /api/upload
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: {
[2m[WebServer] [22m  fieldname: [32m'file'[39m,
[2m[WebServer] [22m  originalname: [32m'test.csv'[39m,
[2m[WebServer] [22m  encoding: [32m'7bit'[39m,
[2m[WebServer] [22m  mimetype: [32m'text/csv'[39m,
[2m[WebServer] [22m  destination: [32m'uploads/'[39m,
[2m[WebServer] [22m  filename: [32m'file-1764099035229-410679932.csv'[39m,
[2m[WebServer] [22m  path: [32m'uploads/file-1764099035229-410679932.csv'[39m,
[2m[WebServer] [22m  size: [33m4[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m1:00:35 AM [express] POST /api/upload 200 in 4ms :: {"fileId":13,"filename":"test.csv","status":"upl‚Ä¶
[2m[WebServer] [22m1:00:35 AM [express] GET /api/uploads/13 200 in 2ms :: {"fileId":13,"status":"pending","processedRow‚Ä¶
[2m[WebServer] [22m‚ùå Server error: MulterError: File too large
[2m[WebServer] [22m    at abortWithCode [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mmulter[24m/lib/make-middleware.js:85:22[90m)[39m
[2m[WebServer] [22m    at FileStream.<anonymous> [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mmulter[24m/lib/make-middleware.js:155:11[90m)[39m
[2m[WebServer] [22m[90m    at FileStream.emit (node:events:518:28)[39m
[2m[WebServer] [22m    at SBMH.ssCb [as _cb] [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mbusboy[24m/lib/types/multipart.js:479:32[90m)[39m
[2m[WebServer] [22m    at feed [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mstreamsearch[24m/lib/sbmh.js:248:10[90m)[39m
[2m[WebServer] [22m    at SBMH.push [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mstreamsearch[24m/lib/sbmh.js:104:16[90m)[39m
[2m[WebServer] [22m    at Multipart._write [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mbusboy[24m/lib/types/multipart.js:567:19[90m)[39m
[2m[WebServer] [22m[90m    at writeOrBuffer (node:internal/streams/writable:572:12)[39m
[2m[WebServer] [22m[90m    at _write (node:internal/streams/writable:501:10)[39m
[2m[WebServer] [22m[90m    at Writable.write (node:internal/streams/writable:510:10)[39m {
[2m[WebServer] [22m  code: [32m'LIMIT_FILE_SIZE'[39m,
[2m[WebServer] [22m  field: [32m'file'[39m,
[2m[WebServer] [22m  storageErrors: []
[2m[WebServer] [22m}
[2m[WebServer] [22m1:00:35 AM [express] POST /api/upload 500 in 72ms :: {"message":"File too large"}
  ‚úì   63 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:771:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ GET /api/uploads/:fileId ‚Ä∫ should retrieve upload status (38ms)
  ‚úò   61 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:737:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should reject files exceeding size limit (105ms)
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m1:00:35 AM [express] POST /api/auth/firebase 200 in 3ms :: {"userId":1,"user":{"id":1,"username":"Te‚Ä¶
  ‚úò   64 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:796:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/firebase ‚Ä∫ should authenticate with valid Firebase token (22ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
[2m[WebServer] [22m1:00:35 AM [express] POST /api/errors/export 200 in 1ms :: [{"id":1,"message":"Test"}]
  ‚úì   65 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:392:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/export ‚Ä∫ should export errors as JSON (64ms)
[2m[WebServer] [22m1:00:35 AM [express] GET /api/errors/stats/by-store 200 in 148ms :: [{"storeNumber":"unknown","total‚Ä¶
[2m[WebServer] [22m1:00:35 AM [express] GET /api/admin/users 401 in 0ms :: {"message":"Authentication required"}
  ‚úì   67 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:842:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ GET /api/admin/users ‚Ä∫ should require admin role (137ms)
  ‚úì   66 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:369:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should provide statistics by store (223ms)
[2m[WebServer] [22mToken verification failed: Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
[2m[WebServer] [22m‚úÖ Using mock token for user: test@stacklens.ai
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m1:00:35 AM [express] POST /api/auth/firebase-signin 200 in 7ms :: {"user":{"id":1,"username":"Test U‚Ä¶
Auth response: {
  user: {
    id: [33m1[39m,
    username: [32m'Test User'[39m,
    email: [32m'test@stacklens.ai'[39m,
    role: [32m'admin'[39m,
    firstName: [32m'Test'[39m,
    lastName: [32m'User'[39m,
    profileImageUrl: [32m'https://example.com/avatar.jpg'[39m,
    department: [1mnull[22m,
    isActive: [33mtrue[39m,
    lastLogin: [32m'2025-11-25T19:30:35.000Z'[39m,
    createdAt: [32m'+057872-01-12T00:20:00.000Z'[39m,
    updatedAt: [32m'+057872-01-12T00:20:00.000Z'[39m
  },
  token: [32m'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImlhdCI6MTc2NDA5OTAzNSwiZXhwIjoxNzY0MTg1NDM1fQ.rD0IV6u6X03RPJDxoJldxon2CAG_-dn6TO9YAP2HkuE'[39m,
  provider: [32m'firebase'[39m
}
[2m[WebServer] [22m1:00:35 AM [express] GET /api/admin/users 200 in 3ms :: [{"id":1,"username":"Test User","email":"tes‚Ä¶
[2m[WebServer] [22m1:00:35 AM [express] POST /api/errors 400 in 1ms :: {"error":"Missing required fields: message and s‚Ä¶
  ‚úì   68 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:849:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ GET /api/admin/users ‚Ä∫ should allow access with admin token (392ms)
  ‚úì   69 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:882:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should reject requests with invalid Content-Type (336ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[2m[WebServer] [22m‚ùå Server error: SyntaxError: Unexpected token '"', ""{invalid json}"" is not valid JSON
[2m[WebServer] [22m    at JSON.parse (<anonymous>)
[2m[WebServer] [22m    at createStrictSyntaxError [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mbody-parser[24m/lib/types/json.js:169:10[90m)[39m
[2m[WebServer] [22m    at parse [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mbody-parser[24m/lib/types/json.js:86:15[90m)[39m
[2m[WebServer] [22m    at [90m/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mbody-parser[24m/lib/read.js:128:18
[2m[WebServer] [22m[90m    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)[39m
[2m[WebServer] [22m    at invokeCallback [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mraw-body[24m/index.js:238:16[90m)[39m
[2m[WebServer] [22m    at done [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mraw-body[24m/index.js:227:7[90m)[39m
[2m[WebServer] [22m    at IncomingMessage.onEnd [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mraw-body[24m/index.js:287:7[90m)[39m
[2m[WebServer] [22m[90m    at IncomingMessage.emit (node:events:518:28)[39m
[2m[WebServer] [22m[90m    at endReadableNT (node:internal/streams/readable:1698:12)[39m {
[2m[WebServer] [22m  expose: [33mtrue[39m,
[2m[WebServer] [22m  statusCode: [33m400[39m,
[2m[WebServer] [22m  status: [33m400[39m,
[2m[WebServer] [22m  body: [32m'"{invalid json}"'[39m,
[2m[WebServer] [22m  type: [32m'entity.parse.failed'[39m
[2m[WebServer] [22m}
  ‚úì   70 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:893:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should validate JSON syntax (143ms)
[2m[WebServer] [22m1:00:36 AM [express] POST /api/errors 201 in 17ms :: {"id":318,"fileId":null,"storeNumber":null,"kio‚Ä¶
  ‚úò   71 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:904:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should enforce maximum payload size (180ms)
  ‚úì   72 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:918:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should validate required headers (232ms)
[2m[WebServer] [22m1:00:36 AM [express] GET /api/errors 200 in 169ms :: {"errors":[{"id":318,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:36 AM [express] POST /api/ml/train 400 in 0ms :: {"error":"Invalid modelType"}
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
  ‚úò   74 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:935:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should validate URL parameter formats (227ms)
  ‚úì   73 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:565:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ POST /api/ml/train ‚Ä∫ should validate training configuration (256ms)
[2m[WebServer] [22m1:00:36 AM [express] GET /api/errors 200 in 203ms :: {"errors":[{"id":318,"fileId":null,"storeNumber‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
  ‚úì   75 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:952:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should return proper Content-Type headers (127ms)
[2m[WebServer] [22m1:00:37 AM [express] GET /api/errors 200 in 100ms :: {"errors":[{"id":318,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22mToken verification failed: Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
[2m[WebServer] [22mToken verification failed: Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
[2m[WebServer] [22m1:00:37 AM [express] POST /api/auth/firebase 401 in 1ms :: {"message":"Invalid Firebase token"}
[2m[WebServer] [22m1:00:37 AM [express] POST /api/auth/firebase 401 in 1ms :: {"message":"Invalid Firebase token"}
  ‚úì   77 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:959:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should include CORS headers (161ms)
  ‚úì   76 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:810:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/firebase ‚Ä∫ should reject invalid token (255ms)
[2m[WebServer] [22m1:00:37 AM [express] GET /api/errors 200 in 111ms :: {"errors":[{"id":318,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:37 AM [express] POST /api/auth/logout 200 in 1ms :: {"message":"Logged out successfully"}
  ‚úì   78 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:822:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/logout ‚Ä∫ should logout user (165ms)
[2m[WebServer] [22m1:00:37 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   79 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:970:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should return consistent error response format (68ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
  ‚úì   82 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1006:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should handle database connection errors gracefully (558ms)
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors 200 in 99ms :: {"errors":[{"id":318,"fileId":null,"storeNumber"‚Ä¶
  ‚úì   81 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:992:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should return timestamps in ISO format (960ms)
  ‚úì   80 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:980:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should include pagination metadata (994ms)
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors 200 in 900ms :: {"errors":[{"id":318,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors 200 in 826ms :: {"errors":[{"id":318,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] POST /api/errors 400 in 1ms :: {"error":"Missing required fields: message and s‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/not-a-number 400 in 0ms :: {"error":"Invalid error ID","message‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] POST /api/errors 400 in 0ms :: {"error":"Missing required fields: message and s‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/nonexistent 404 in 9ms
  ‚úì   84 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1014:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should return 404 for non-existent routes (438ms)
  ‚úò   86 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1026:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should provide helpful error messages (146ms)
  ‚úì   85 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1020:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should handle malformed route parameters (189ms)
  ‚úì   83 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:929:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should handle missing request body (641ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   88 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1068:5 ‚Ä∫ API Tests - Rate Limiting ‚Ä∫ should include rate limit headers (232ms)
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors 200 in 186ms :: {"errors":[{"id":318,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   90 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1104:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle page=0 (185ms)
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors 200 in 86ms :: {"errors":[{"id":318,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:38 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:39 AM [express] GET /api/errors 200 in 194ms :: {"errors":[{"id":318,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:39 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m1:00:39 AM [express] GET /api/errors 400 in 0ms :: {"error":"Invalid page parameter"}
[2m[WebServer] [22m1:00:39 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   92 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1111:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle negative page numbers (31ms)
[2m[WebServer] [22m1:00:39 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   87 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1038:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should handle concurrent request failures (529ms)
[2m[WebServer] [22m1:00:39 AM [express] GET /api/errors 200 in 290ms :: {"errors":[],"total":303,"page":999999,"limit":‚Ä¶
  ‚úì   93 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1117:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle excessive page numbers (398ms)
  ‚úò   94 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1127:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle limit=0 (741ms)
[2m[WebServer] [22m1:00:39 AM [express] GET /api/errors 200 in 387ms :: {"errors":[{"id":318,"fileId":null,"storeNumber‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
[2m[WebServer] [22m1:00:39 AM [express] GET /api/errors 400 in 0ms :: {"error":"Invalid limit parameter"}
  ‚úì   95 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1133:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should enforce maximum limit (449ms)
[2m[WebServer] [22m1:00:40 AM [express] POST /api/errors 201 in 2ms :: {"id":319,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:00:40 AM [express] GET /api/errors 200 in 1063ms :: {"errors":[{"id":318,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m1:00:40 AM [express] GET /api/errors 200 in 292ms :: {"errors":[{"id":318,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:40 AM [express] GET /api/errors 200 in 531ms :: {"errors":[{"id":318,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:40 AM [express] GET /api/errors 200 in 642ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:41 AM [express] GET /api/errors 200 in 971ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:41 AM [express] GET /api/errors 200 in 1119ms :: {"errors":[{"id":319,"fileId":null,"storeNumbe‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
[2m[WebServer] [22m1:00:41 AM [express] GET /api/errors 200 in 1267ms :: {"errors":[{"id":319,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m1:00:41 AM [express] GET /api/errors 200 in 974ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:41 AM [express] GET /api/errors 200 in 462ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:42 AM [express] GET /api/errors 200 in 414ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:43 AM [express] GET /api/errors 200 in 1087ms :: {"errors":[{"id":319,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m1:00:43 AM [express] GET /api/errors 200 in 890ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:43 AM [express] GET /api/errors 200 in 1685ms :: {"errors":[{"id":319,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m1:00:43 AM [express] GET /api/errors 200 in 1076ms :: {"errors":[{"id":319,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m1:00:43 AM [express] GET /api/errors 200 in 755ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:44 AM [express] GET /api/errors 200 in 560ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:44 AM [express] GET /api/errors 200 in 701ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:44 AM [express] GET /api/errors 200 in 549ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:44 AM [express] GET /api/errors 200 in 481ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:44 AM [express] GET /api/errors 200 in 315ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:44 AM [express] GET /api/errors 200 in 287ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:44 AM [express] GET /api/errors 200 in 520ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:45 AM [express] GET /api/errors 200 in 559ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:45 AM [express] GET /api/errors 200 in 719ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:45 AM [express] GET /api/errors 200 in 828ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:45 AM [express] GET /api/errors 200 in 612ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:46 AM [express] GET /api/errors 200 in 431ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:46 AM [express] GET /api/errors 200 in 733ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:46 AM [express] GET /api/errors 200 in 389ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:46 AM [express] GET /api/errors 200 in 475ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:46 AM [express] GET /api/errors 200 in 599ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:46 AM [express] GET /api/errors 200 in 540ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:46 AM [express] GET /api/errors 200 in 744ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:47 AM [express] GET /api/errors 200 in 528ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:47 AM [express] GET /api/errors 200 in 391ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:47 AM [express] GET /api/errors 200 in 178ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:47 AM [express] GET /api/errors 200 in 502ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:47 AM [express] GET /api/errors 200 in 397ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:47 AM [express] GET /api/errors 200 in 664ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:47 AM [express] GET /api/errors 200 in 584ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
  ‚úò   97 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1052:5 ‚Ä∫ API Tests - Rate Limiting ‚Ä∫ should implement rate limiting (8.0s)
[2m[WebServer] [22m1:00:48 AM [express] GET /api/errors 200 in 163ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:48 AM [express] GET /api/errors 200 in 409ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:48 AM [express] GET /api/errors 200 in 272ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:48 AM [express] GET /api/errors 200 in 248ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:48 AM [express] GET /api/errors 200 in 333ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:48 AM [express] GET /api/errors 200 in 415ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:49 AM [express] GET /api/errors 200 in 601ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:49 AM [express] GET /api/errors 200 in 898ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
[2m[WebServer] [22m1:00:49 AM [express] GET /api/errors 200 in 615ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:49 AM [express] GET /api/errors 200 in 460ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:49 AM [express] GET /api/errors 200 in 413ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:49 AM [express] GET /api/errors 200 in 265ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
  ‚úò   98 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1147:5 ‚Ä∫ API Tests - Concurrent Operations ‚Ä∫ should handle concurrent reads safely (7.9s)
[2m[WebServer] [22m1:00:49 AM [express] GET /api/errors 200 in 250ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:49 AM [express] GET /api/errors 200 in 134ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:49 AM [express] GET /api/errors 200 in 271ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:49 AM [express] GET /api/errors 200 in 209ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:50 AM [express] GET /api/errors 200 in 256ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:50 AM [express] GET /api/errors 200 in 594ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:50 AM [express] GET /api/errors 200 in 702ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:50 AM [express] GET /api/errors 200 in 547ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:50 AM [express] GET /api/errors 200 in 494ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
[2m[WebServer] [22m1:00:50 AM [express] GET /api/errors 200 in 188ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:50 AM [express] GET /api/errors 200 in 464ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:50 AM [express] GET /api/errors 200 in 186ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:51 AM [express] GET /api/errors 200 in 167ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:51 AM [express] GET /api/errors 200 in 274ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:51 AM [express] GET /api/errors 200 in 145ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:51 AM [express] GET /api/errors 200 in 130ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:51 AM [express] GET /api/errors 200 in 600ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:51 AM [express] GET /api/errors 200 in 308ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:51 AM [express] GET /api/errors 200 in 731ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:52 AM [express] GET /api/errors 200 in 345ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:52 AM [express] GET /api/errors 200 in 557ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:52 AM [express] GET /api/errors 200 in 275ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:52 AM [express] GET /api/errors 200 in 188ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:52 AM [express] GET /api/errors 200 in 467ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:52 AM [express] GET /api/errors 200 in 554ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:52 AM [express] GET /api/errors 200 in 516ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:53 AM [express] GET /api/errors 200 in 489ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:53 AM [express] GET /api/errors 200 in 276ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:53 AM [express] GET /api/errors 200 in 159ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:53 AM [express] GET /api/errors 200 in 198ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:53 AM [express] GET /api/errors 200 in 225ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:53 AM [express] GET /api/errors 200 in 415ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:53 AM [express] GET /api/errors 200 in 682ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:53 AM [express] GET /api/errors 200 in 593ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:53 AM [express] GET /api/errors 200 in 518ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:54 AM [express] GET /api/errors 200 in 650ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:54 AM [express] GET /api/errors 200 in 642ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:54 AM [express] GET /api/errors 200 in 319ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:54 AM [express] GET /api/errors 200 in 332ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:55 AM [express] GET /api/errors 200 in 704ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:55 AM [express] GET /api/errors 200 in 726ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:55 AM [express] GET /api/errors 200 in 852ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:55 AM [express] GET /api/errors 200 in 819ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:55 AM [express] GET /api/errors 200 in 80ms :: {"errors":[],"total":0,"page":1,"limit":20,"tota‚Ä¶
[2m[WebServer] [22m1:00:55 AM [express] GET /api/errors 200 in 544ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:55 AM [express] GET /api/errors 200 in 224ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
  ‚úì   91 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:941:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should handle special characters in query params (17.2s)
[2m[WebServer] [22m1:00:56 AM [express] GET /api/errors 200 in 319ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:56 AM [express] POST /api/errors 201 in 2ms :: {"id":320,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:00:56 AM [express] POST /api/errors 201 in 4ms :: {"id":321,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:00:56 AM [express] GET /api/errors 200 in 235ms :: {"errors":[{"id":319,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:56 AM [express] POST /api/errors 201 in 2ms :: {"id":322,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:00:56 AM [express] POST /api/errors 201 in 3ms :: {"id":323,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:00:56 AM [express] POST /api/errors 201 in 2ms :: {"id":324,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:00:56 AM [express] POST /api/errors 201 in 5ms :: {"id":325,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:00:56 AM [express] POST /api/errors 201 in 6ms :: {"id":326,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:00:56 AM [express] POST /api/errors 201 in 3ms :: {"id":327,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:00:56 AM [express] POST /api/errors 201 in 3ms :: {"id":328,"fileId":null,"storeNumber":null,"kios‚Ä¶
  ‚úì   96 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1158:5 ‚Ä∫ API Tests - Concurrent Operations ‚Ä∫ should handle concurrent writes with proper isolation (16.3s)
[2m[WebServer] [22m1:00:56 AM [express] GET /api/errors 200 in 162ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:56 AM [express] GET /api/errors 200 in 404ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
  ‚úì  101 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1219:5 ‚Ä∫ API Tests - Cache Control ‚Ä∫ should respect If-None-Match for conditional requests (880ms)
[2m[WebServer] [22m1:00:56 AM [express] GET /api/errors 200 in 187ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:57 AM [express] GET /api/errors 200 in 120ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
  ‚úì   89 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1084:5 ‚Ä∫ API Tests - Rate Limiting ‚Ä∫ should reset rate limits after time window (18.6s)
[2m[WebServer] [22m1:00:57 AM [express] GET /api/errors 200 in 61ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:00:57 AM [express] GET /api/errors 200 in 96ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:00:57 AM [express] GET /api/errors 200 in 395ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
  ‚úì  102 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1234:5 ‚Ä∫ API Tests - Cache Control ‚Ä∫ should support If-Modified-Since (1.2s)
[2m[WebServer] [22m1:00:57 AM [express] GET /api/errors 200 in 689ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:57 AM [express] GET /api/errors 200 in 309ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:57 AM [express] GET /api/errors 200 in 207ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:57 AM [express] GET /api/errors 200 in 148ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:58 AM [express] GET /api/errors 200 in 57ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:00:58 AM [express] GET /api/errors 200 in 156ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:58 AM [express] GET /api/errors 200 in 52ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:00:58 AM [express] GET /api/errors 200 in 102ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:58 AM [express] GET /api/errors 200 in 84ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:00:58 AM [express] GET /api/errors 200 in 161ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:58 AM [express] GET /api/errors 200 in 195ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:58 AM [express] GET /api/errors 200 in 92ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:00:58 AM [express] GET /api/errors 200 in 63ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:00:58 AM [express] GET /api/errors 200 in 59ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:00:59 AM [express] GET /api/errors 200 in 68ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:00:59 AM [express] GET /api/errors 200 in 108ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:59 AM [express] GET /api/errors 200 in 69ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:00:59 AM [express] GET /api/errors 200 in 114ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:59 AM [express] GET /api/errors 200 in 167ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:00:59 AM [express] GET /api/errors 200 in 310ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:01:00 AM [express] GET /api/errors 200 in 374ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:01:00 AM [express] GET /api/errors 200 in 123ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:01:00 AM [express] GET /api/errors 200 in 66ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:00 AM [express] GET /api/errors 200 in 82ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:00 AM [express] GET /api/errors 200 in 62ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:00 AM [express] GET /api/errors 200 in 56ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:00 AM [express] GET /api/errors 200 in 56ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:00 AM [express] GET /api/errors 200 in 51ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:01 AM [express] GET /api/errors 200 in 58ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:01 AM [express] GET /api/errors 200 in 139ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:01:01 AM [express] GET /api/errors 200 in 285ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:01:01 AM [express] GET /api/errors 200 in 116ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:01:01 AM [express] GET /api/errors 200 in 81ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:01 AM [express] GET /api/errors 200 in 57ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:01 AM [express] GET /api/errors 200 in 55ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:01 AM [express] GET /api/errors 200 in 73ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:02 AM [express] GET /api/errors 200 in 58ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:02 AM [express] GET /api/errors 200 in 58ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:02 AM [express] GET /api/errors 200 in 50ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:02 AM [express] GET /api/errors 200 in 56ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:02 AM [express] GET /api/errors 200 in 95ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:02 AM [express] GET /api/errors 200 in 372ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:01:03 AM [express] GET /api/errors 200 in 263ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:01:03 AM [express] GET /api/errors 200 in 82ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:03 AM [express] GET /api/errors 200 in 67ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:03 AM [express] GET /api/errors 200 in 71ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:03 AM [express] GET /api/errors 200 in 63ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:03 AM [express] GET /api/errors 200 in 60ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:03 AM [express] GET /api/errors 200 in 57ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:03 AM [express] GET /api/errors 200 in 59ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:03 AM [express] GET /api/errors 200 in 194ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:01:04 AM [express] GET /api/errors 200 in 208ms :: {"errors":[{"id":320,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m1:01:04 AM [express] GET /api/errors 200 in 92ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:04 AM [express] GET /api/errors 200 in 56ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:04 AM [express] GET /api/errors 200 in 66ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:04 AM [express] GET /api/errors 200 in 62ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:04 AM [express] GET /api/errors 200 in 63ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:04 AM [express] GET /api/errors 200 in 75ms :: {"errors":[{"id":320,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m1:01:04 AM [express] POST /api/errors 201 in 1ms :: {"id":329,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m1:01:04 AM [express] PUT /api/errors/329 404 in 1ms
[2m[WebServer] [22m1:01:04 AM [express] PUT /api/errors/329 404 in 0ms
[2m[WebServer] [22m1:01:04 AM [express] PUT /api/errors/329 404 in 1ms
[2m[WebServer] [22m1:01:04 AM [express] PUT /api/errors/329 404 in 0ms
[2m[WebServer] [22m1:01:04 AM [express] PUT /api/errors/329 404 in 1ms
[2m[WebServer] [22m1:01:04 AM [express] GET /api/errors 200 in 59ms :: {"errors":[{"id":329,"fileId":null,"storeNumber"‚Ä¶
  ‚úì  100 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1208:5 ‚Ä∫ API Tests - Cache Control ‚Ä∫ should include appropriate cache headers (13.9s)
  ‚úò   99 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1175:5 ‚Ä∫ API Tests - Concurrent Operations ‚Ä∫ should prevent race conditions on updates (15.3s)


  1) [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:138:5 ‚Ä∫ File Upload API ‚Ä∫ GET /api/files - should list uploaded files 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

      153 |
      154 |         const data = await response.json();
    > 155 |         expect(Array.isArray(data)).toBe(true);
          |                                     ^
      156 |         expect(data.length).toBeGreaterThan(0);
      157 |
      158 |         if (data.length > 0) {
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/auth-upload.test.ts:155:37

  2) [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:190:5 ‚Ä∫ File Upload API ‚Ä∫ DELETE /api/files/:id - should delete file 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m500[39m

      206 |         const response = await apiContext.delete(`/api/files/${fileId}`);
      207 |
    > 208 |         expect(response.status()).toBe(200);
          |                                   ^
      209 |
      210 |         const data = await response.json();
      211 |         expect(data).toHaveProperty('message', 'File deleted successfully');
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/auth-upload.test.ts:208:35

  3) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:58:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should search by message 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected substring: [32m"database"[39m
    Received string:    [31m"bulk error 2"[39m

      63 |             expect(Array.isArray(data.errors)).toBeTruthy();
      64 |             data.errors.forEach((error: any) => {
    > 65 |                 expect(error.message.toLowerCase()).toContain('database');
         |                                                     ^
      66 |             });
      67 |         });
      68 |
        at forEach (/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:65:53)
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:64:25

  4) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:69:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by resolved status 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mfalse[39m
    Received: [31mtrue[39m

      74 |             expect(Array.isArray(data.errors)).toBeTruthy();
      75 |             data.errors.forEach((error: any) => {
    > 76 |                 expect(error.resolved).toBe(false);
         |                                        ^
      77 |             });
      78 |         });
      79 |
        at forEach (/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:76:40)
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:75:25

  5) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:347:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should retrieve error statistics 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeTruthy[2m()[22m

    Received: [31mfalse[39m

      348 |             const response = await apiContext.get('/api/errors/stats');
      349 |
    > 350 |             expect(response.ok()).toBeTruthy();
          |                                   ^
      351 |             const stats = await response.json();
      352 |             expect(stats).toHaveProperty('total');
      353 |             expect(stats).toHaveProperty('bySeverity');
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:350:35

  6) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:359:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should filter statistics by date range 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeTruthy[2m()[22m

    Received: [31mfalse[39m

      362 |             );
      363 |
    > 364 |             expect(response.ok()).toBeTruthy();
          |                                   ^
      365 |             const stats = await response.json();
      366 |             expect(stats).toHaveProperty('dateRange');
      367 |         });
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:364:35

  7) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:501:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/kiosks ‚Ä∫ should create new kiosk 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeTruthy[2m()[22m

    Received: [31mfalse[39m

      521 |             });
      522 |
    > 523 |             expect(response.ok()).toBeTruthy();
          |                                   ^
      524 |             const created = await response.json();
      525 |             expect(created.kioskNumber).toBe(newKiosk.kioskNumber);
      526 |         });
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:523:35

  8) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:737:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should reject files exceeding size limit 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m413[39m
    Received: [31m500[39m

      748 |             });
      749 |
    > 750 |             expect(response.status()).toBe(413); // Payload Too Large
          |                                       ^
      751 |         });
      752 |
      753 |         test('should reject unsupported file types', async ({ apiContext }) => {
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:750:39

  9) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:796:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/firebase ‚Ä∫ should authenticate with valid Firebase token 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoHaveProperty[2m([22m[32mpath[39m[2m)[22m

    Expected path: [32m"sessionToken"[39m
    Received path: [31m[][39m

    Received value: [31m{"email": "test@stacklens.ai", "provider": "firebase", "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImlhdCI6MTc2NDA5OTAzNSwiZXhwIjoxNzY0MTg1NDM1fQ.rD0IV6u6X03RPJDxoJldxon2CAG_-dn6TO9YAP2HkuE", "user": {"createdAt": "+057872-01-12T00:20:00.000Z", "department": null, "email": "test@stacklens.ai", "firstName": "Test", "id": 1, "isActive": true, "lastLogin": "2025-11-25T19:30:35.000Z", "lastName": "User", "profileImageUrl": "https://example.com/photo.jpg", "role": "admin", "updatedAt": "+057872-01-12T00:20:00.000Z", "username": "Test User"}, "userId": 1}[39m

      805 |             expect(auth).toHaveProperty('userId');
      806 |             expect(auth).toHaveProperty('email');
    > 807 |             expect(auth).toHaveProperty('sessionToken');
          |                          ^
      808 |         });
      809 |
      810 |         test('should reject invalid token', async ({ apiContext }) => {
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:807:26

  10) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:904:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should enforce maximum payload size 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m201[39m
    Received array: [31m[413, 400][39m

      913 |         });
      914 |
    > 915 |         expect([413, 400]).toContain(response.status());
          |                            ^
      916 |     });
      917 |
      918 |     test('should validate required headers', async ({ apiContext }) => {
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:915:28

  11) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:935:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should validate URL parameter formats 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m200[39m
    Received array: [31m[400, 422][39m

      936 |         const response = await apiContext.get('/api/errors?page=invalid');
      937 |
    > 938 |         expect([400, 422]).toContain(response.status());
          |                            ^
      939 |     });
      940 |
      941 |     test('should handle special characters in query params', async ({ apiContext }) => {
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:938:28

  12) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1026:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should provide helpful error messages 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeTruthy[2m()[22m

    Received: [31mundefined[39m

      1032 |         const error = await response.json();
      1033 |
    > 1034 |         expect(error.message).toBeTruthy();
           |                               ^
      1035 |         expect(error.message.length).toBeGreaterThan(0);
      1036 |     });
      1037 |
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:1034:31

  13) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1052:5 ‚Ä∫ API Tests - Rate Limiting ‚Ä∫ should implement rate limiting 

    Error: apiRequestContext.get: connect ETIMEDOUT 127.0.0.1:4001
    Call log:
    [2m  - ‚Üí GET http://127.0.0.1:4001/api/errors[22m
    [2m    - user-agent: Playwright/1.57.0 (arm64; macOS 15.6) node/22.17[22m
    [2m    - accept: */*[22m
    [2m    - accept-encoding: gzip,deflate,br[22m
    [2m    - Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImlhdCI6MTc2NDA5OTAyMywiZXhwIjoxNzY0MTg1NDIzfQ.a96ZTxVV0xbBh54WHgqIJJ_uhx-NLb8UfHDZSY5Hm2g[22m
    [2m    - x-test-force-ratelimit: true[22m


      1052 |     test('should implement rate limiting', async ({ apiContext }) => {
      1053 |         const requests = Array.from({ length: 150 }, () =>
    > 1054 |             apiContext.get('/api/errors', {
           |                        ^
      1055 |                 headers: { 'x-test-force-ratelimit': 'true' }
      1056 |             })
      1057 |         );
        at from (/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:1054:24)
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:1053:32

  14) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1127:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle limit=0 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m200[39m
    Received array: [31m[400, 422][39m

      1128 |         const response = await apiContext.get('/api/errors?page=1&limit=0');
      1129 |
    > 1130 |         expect([400, 422]).toContain(response.status());
           |                            ^
      1131 |     });
      1132 |
      1133 |     test('should enforce maximum limit', async ({ apiContext }) => {
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:1130:28

  15) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1147:5 ‚Ä∫ API Tests - Concurrent Operations ‚Ä∫ should handle concurrent reads safely 

    Error: apiRequestContext.get: connect ETIMEDOUT 127.0.0.1:4001
    Call log:
    [2m  - ‚Üí GET http://127.0.0.1:4001/api/errors[22m
    [2m    - user-agent: Playwright/1.57.0 (arm64; macOS 15.6) node/22.17[22m
    [2m    - accept: */*[22m
    [2m    - accept-encoding: gzip,deflate,br[22m
    [2m    - Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImlhdCI6MTc2NDA5OTAyMywiZXhwIjoxNzY0MTg1NDIzfQ.a96ZTxVV0xbBh54WHgqIJJ_uhx-NLb8UfHDZSY5Hm2g[22m


      1147 |     test('should handle concurrent reads safely', async ({ apiContext }) => {
      1148 |         const requests = Array.from({ length: 50 }, () =>
    > 1149 |             apiContext.get('/api/errors')
           |                        ^
      1150 |         );
      1151 |
      1152 |         const responses = await Promise.all(requests);
        at from (/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:1149:24)
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:1148:32

  16) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1175:5 ‚Ä∫ API Tests - Concurrent Operations ‚Ä∫ should prevent race conditions on updates 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m404[39m
    Received array: [31m[200, 409][39m

      1200 |         // All should succeed or have proper conflict handling
      1201 |         responses.forEach(r => {
    > 1202 |             expect([200, 409]).toContain(r.status());
           |                                ^
      1203 |         });
      1204 |     });
      1205 | });
        at forEach (/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:1202:32)
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:1201:19

  16 failed
    [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:138:5 ‚Ä∫ File Upload API ‚Ä∫ GET /api/files - should list uploaded files 
    [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:190:5 ‚Ä∫ File Upload API ‚Ä∫ DELETE /api/files/:id - should delete file 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:58:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should search by message 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:69:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by resolved status 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:347:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should retrieve error statistics 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:359:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should filter statistics by date range 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:501:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/kiosks ‚Ä∫ should create new kiosk 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:737:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should reject files exceeding size limit 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:796:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/firebase ‚Ä∫ should authenticate with valid Firebase token 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:904:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should enforce maximum payload size 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:935:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should validate URL parameter formats 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1026:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should provide helpful error messages 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1052:5 ‚Ä∫ API Tests - Rate Limiting ‚Ä∫ should implement rate limiting 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1127:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle limit=0 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1147:5 ‚Ä∫ API Tests - Concurrent Operations ‚Ä∫ should handle concurrent reads safely 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1175:5 ‚Ä∫ API Tests - Concurrent Operations ‚Ä∫ should prevent race conditions on updates 
  86 passed (53.6s)

[36m  Serving HTML report at http://localhost:64293. Press Ctrl+C to quit.[39m
