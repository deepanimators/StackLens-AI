
> stacklens-ai-platform@1.0.0 dev:server
> cross-env NODE_ENV=development node --import tsx --no-warnings apps/api/src/index.ts

[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
üöÄ RAG: Vector database initialized
{"level":"WARN","timestamp":"2025-11-21T18:46:36.346Z","logger":"kafkajs","message":"KafkaJS v2.0.0 switched default partitioner. To retain the same partitioning behavior as in previous versions, create the producer with the option \"createPartitioner: Partitioners.LegacyPartitioner\". See the migration guide at https://kafka.js.org/docs/migration-guide-v2.0.0#producer-new-default-partitioner for details. Silence this warning by setting the environment variable \"KAFKAJS_NO_PARTITIONER_WARNING=1\""}
üîÑ Starting server initialization...
Starting LogWatcher service for real-time monitoring...
üìç Watching directories: /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/data, /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/logs
[LogWatcherService] Started watching 2 file(s)
‚úÖ LogWatcher service started successfully
‚úÖ Routes registered successfully
üîÑ Setting up Vite...
üìö RAG: Indexing 50 resolved error patterns...
‚úÖ RAG: Knowledge base populated with 50 patterns
üîÑ Indexing existing errors for RAG system...
‚ö†Ô∏è Vector DB not initialized, storing patterns locally
‚úÖ Successfully indexed 807 errors for RAG
‚úÖ Enhanced RAG Suggestor initialized
üéØ Enhanced RAG system ready with vector database
üöÄ Starting Python vector database service...
‚ö†Ô∏è Enhanced vector service not found, using fallback similarity search
‚úÖ Vector database service initialized
‚úÖ Vite setup complete
12:16:53 AM [express] serving on port 4000
12:18:00 AM [vite] page reload playwright-report/index.html
12:19:01 AM [express] GET /api/auth/me 200 in 47ms :: {"user":{"id":1,"username":"deepanimators","ema‚Ä¶
12:19:01 AM [express] GET /api/admin/ui-settings 200 in 9ms :: {"theme":"light","sidebarCollapsed":fa‚Ä¶
12:19:01 AM [express] GET /api/admin/api-settings 200 in 6ms :: {"geminiApiKey":"","webhookUrl":"","m‚Ä¶
12:19:01 AM [express] GET /api/analytics/alerts 200 in 11ms :: {"success":true,"data":{"alerts":[],"t‚Ä¶
12:19:01 AM [express] GET /api/analytics/health-status 200 in 9ms :: {"success":true,"data":{"status"‚Ä¶
12:19:01 AM [express] GET /api/analytics/metrics 200 in 4ms :: {"success":true,"data":{"window":"1min‚Ä¶
12:19:01 AM [express] GET /api/version 200 in 11ms :: {"version":"0.9.5","releaseDate":"2025-11-19","‚Ä¶
12:19:08 AM [express] GET /api/auth/me 200 in 141ms :: {"user":{"id":1,"username":"deepanimators","em‚Ä¶
12:19:12 AM [express] GET /api/analytics/alerts 200 in 3ms :: {"success":true,"data":{"alerts":[],"to‚Ä¶
12:19:12 AM [express] GET /api/analytics/health-status 200 in 0ms :: {"success":true,"data":{"status"‚Ä¶
12:19:12 AM [express] GET /api/analytics/metrics 200 in 4ms :: {"success":true,"data":{"window":"1min‚Ä¶
12:19:17 AM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"‚Ä¶
12:19:17 AM [express] GET /api/analytics/metrics 200 in 5ms :: {"success":true,"data":{"window":"1min‚Ä¶
12:19:22 AM [express] GET /api/analytics/alerts 200 in 3ms :: {"success":true,"data":{"alerts":[],"to‚Ä¶
12:19:22 AM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"‚Ä¶
12:19:22 AM [express] GET /api/analytics/metrics 200 in 3ms :: {"success":true,"data":{"window":"1min‚Ä¶
12:19:27 AM [express] GET /api/files 200 in 65ms :: {"files":[{"id":117,"filename":"files-17597387954‚Ä¶
üîç [DEBUG] Dashboard - Resolution Rate: 130 resolved out of 152394 total = 0.1%
12:19:34 AM [express] GET /api/dashboard/stats 200 in 7407ms :: {"totalFiles":96,"totalErrors":152394‚Ä¶
üîç [DEBUG] Total user errors: 152394
12:19:40 AM [express] GET /api/errors 200 in 5994ms :: {"errors":[{"id":155382,"fileId":117,"filename‚Ä¶
12:19:40 AM [express] GET /api/version 200 in 6ms :: {"version":"0.9.5","releaseDate":"2025-11-19","c‚Ä¶
12:19:40 AM [express] GET /api/version 200 in 3ms :: {"version":"0.9.5","releaseDate":"2025-11-19","c‚Ä¶
üìä Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:19:40 AM [express] GET /api/analysis/history 200 in 42ms :: {"history":[{"id":108,"fileId":117,"fi‚Ä¶
12:19:40 AM [express] GET /api/version 200 in 2ms :: {"version":"0.9.5","releaseDate":"2025-11-19","c‚Ä¶
üìä Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:19:40 AM [express] GET /api/analysis/history 200 in 23ms :: {"history":[{"id":108,"fileId":117,"fi‚Ä¶
12:19:40 AM [express] GET /api/stores 200 in 6ms :: [{"id":1,"storeNumber":"BK-14959","name":"Applegr‚Ä¶
12:19:40 AM [express] GET /api/kiosks 200 in 7ms :: [{"id":24,"kioskNumber":"BK-14959-K1","storeId":1‚Ä¶
12:19:44 AM [express] GET /api/version 200 in 11ms :: {"version":"0.9.5","releaseDate":"2025-11-19","‚Ä¶
12:19:48 AM [express] GET /api/version 200 in 10ms :: {"version":"0.9.5","releaseDate":"2025-11-19","‚Ä¶
12:19:48 AM [express] GET /api/ai/train-suggestion-model/scenarios 200 in 102ms :: {"success":true,"t‚Ä¶
üìä Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:19:58 AM [express] GET /api/analysis/history 200 in 71ms :: {"history":[{"id":108,"fileId":117,"fi‚Ä¶
12:20:05 AM [express] GET /api/auth/me 200 in 18ms :: {"user":{"id":1,"username":"deepanimators","ema‚Ä¶
12:20:08 AM [express] GET /api/auth/me 200 in 7ms :: {"user":{"id":1,"username":"deepanimators","emai‚Ä¶
12:20:08 AM [express] GET /api/admin/ui-settings 200 in 5ms :: {"theme":"light","sidebarCollapsed":fa‚Ä¶
12:20:08 AM [express] GET /api/admin/api-settings 200 in 14ms :: {"geminiApiKey":"","webhookUrl":"","‚Ä¶
üìä Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:20:08 AM [express] GET /api/analysis/history 200 in 18ms :: {"history":[{"id":108,"fileId":117,"fi‚Ä¶
üìä Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:20:08 AM [express] GET /api/analysis/history 200 in 76ms :: {"history":[{"id":108,"fileId":117,"fi‚Ä¶
12:20:09 AM [express] GET /api/version 200 in 4ms :: {"version":"0.9.5","releaseDate":"2025-11-19","c‚Ä¶
12:20:09 AM [express] GET /api/ai/train-suggestion-model/scenarios 200 in 11ms :: {"success":true,"to‚Ä¶
üìä Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:20:19 AM [express] GET /api/analysis/history 200 in 38ms :: {"history":[{"id":108,"fileId":117,"fi‚Ä¶
12:20:23 AM [express] GET /api/ai/train-suggestion-model/scenarios 200 in 40ms :: {"success":true,"to‚Ä¶
üìä Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:20:29 AM [express] GET /api/analysis/history 200 in 23ms :: {"history":[{"id":108,"fileId":117,"fi‚Ä¶
12:20:30 AM [express] GET /api/ai/train-suggestion-model/scenarios 200 in 16ms :: {"success":true,"to‚Ä¶
üìä Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:20:39 AM [express] GET /api/analysis/history 200 in 45ms :: {"history":[{"id":108,"fileId":117,"fi‚Ä¶
üìä Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:20:39 AM [express] GET /api/analysis/history 200 in 20ms :: {"history":[{"id":108,"fileId":117,"fi‚Ä¶
12:20:39 AM [express] GET /api/ai/train-suggestion-model/scenarios 200 in 5ms :: {"success":true,"tot‚Ä¶
12:20:41 AM [express] GET /api/ai/train-suggestion-model/scenarios 200 in 3ms :: {"success":true,"tot‚Ä¶
üìä Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:20:49 AM [express] GET /api/analysis/history 200 in 87ms :: {"history":[{"id":108,"fileId":117,"fi‚Ä¶
12:20:50 AM [express] GET /api/version 200 in 16ms :: {"version":"0.9.5","releaseDate":"2025-11-19","‚Ä¶
12:20:50 AM [express] GET /api/analytics/metrics 200 in 1ms :: {"success":true,"data":{"window":"1min‚Ä¶
12:20:50 AM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"‚Ä¶
12:20:50 AM [express] GET /api/analytics/alerts 200 in 0ms :: {"success":true,"data":{"alerts":[],"to‚Ä¶
12:20:55 AM [express] GET /api/analytics/metrics 200 in 6ms :: {"success":true,"data":{"window":"1min‚Ä¶
12:20:55 AM [express] GET /api/analytics/health-status 200 in 2ms :: {"success":true,"data":{"status"‚Ä¶
üìä Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:21:00 AM [express] GET /api/analysis/history 200 in 34ms :: {"history":[{"id":108,"fileId":117,"fi‚Ä¶
12:21:00 AM [express] GET /api/analytics/alerts 200 in 1ms :: {"success":true,"data":{"alerts":[],"to‚Ä¶
12:21:00 AM [express] GET /api/analytics/metrics 200 in 2ms :: {"success":true,"data":{"window":"1min‚Ä¶
12:21:00 AM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"‚Ä¶
12:21:05 AM [express] GET /api/analytics/metrics 200 in 2ms :: {"success":true,"data":{"window":"1min‚Ä¶
12:21:05 AM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"‚Ä¶
üìä Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:21:10 AM [express] GET /api/analysis/history 200 in 15ms :: {"history":[{"id":108,"fileId":117,"fi‚Ä¶
12:21:10 AM [express] GET /api/analytics/alerts 200 in 0ms :: {"success":true,"data":{"alerts":[],"to‚Ä¶
12:21:10 AM [express] GET /api/analytics/metrics 200 in 1ms :: {"success":true,"data":{"window":"1min‚Ä¶
12:21:10 AM [express] GET /api/analytics/health-status 200 in 2ms :: {"success":true,"data":{"status"‚Ä¶
12:21:15 AM [express] GET /api/analytics/metrics 200 in 2ms :: {"success":true,"data":{"window":"1min‚Ä¶
12:21:15 AM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"‚Ä¶
