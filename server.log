
> stacklens-ai-platform@1.0.0 dev:server
> cross-env NODE_ENV=development node --import tsx --no-warnings apps/api/src/index.ts

[dotenv@17.2.3] injecting env (0) from .env -- tip: ğŸ—‚ï¸ backup and recover secrets: https://dotenvx.com/ops
ğŸ¤– AI Service initialized with 1 providers: gemini
[dotenv@17.2.3] injecting env (0) from .env -- tip: ğŸ” encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.3] injecting env (0) from .env -- tip: âš™ï¸  load multiple .env files with { path: ['.env.local', '.env'] }
ğŸš€ RAG: Vector database initialized
{"level":"WARN","timestamp":"2025-11-27T06:28:20.524Z","logger":"kafkajs","message":"KafkaJS v2.0.0 switched default partitioner. To retain the same partitioning behavior as in previous versions, create the producer with the option \"createPartitioner: Partitioners.LegacyPartitioner\". See the migration guide at https://kafka.js.org/docs/migration-guide-v2.0.0#producer-new-default-partitioner for details. Silence this warning by setting the environment variable \"KAFKAJS_NO_PARTITIONER_WARNING=1\""}
Setting up SQLite database...
âœ… SQLite database initialized successfully
ğŸ”„ Starting server initialization...
âœ… Database tables initialized
Starting LogWatcher service for real-time monitoring...
ğŸ“ Watching directories: /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/data, /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/logs
[LogWatcherService] Started watching 2 file(s)
âœ… LogWatcher service started successfully
âœ… Routes registered successfully
ğŸ”„ Setting up Vite...
ğŸ“š RAG: Indexing 50 resolved error patterns...
âœ… RAG: Knowledge base populated with 50 patterns
ğŸ”„ Indexing existing errors for RAG system...
âš ï¸ Vector DB not initialized, storing patterns locally
âœ… Successfully indexed 807 errors for RAG
âœ… Enhanced RAG Suggestor initialized
ğŸ¯ Enhanced RAG system ready with vector database
ğŸ“Š Generating metrics for window 1min. Events: 0, Total Events: 0
ğŸ”” Updating alerts. Current active: 0. Latest Metric Error Rate: 0
ğŸš€ Starting Python vector database service...
âš ï¸ Enhanced vector service not found, using fallback similarity search
âœ… Vector database service initialized
Re-optimizing dependencies because vite config has changed
âœ… Vite setup complete
ğŸŒ± Seeding SQLite database...
â„¹ï¸ Database already seeded. Skipping seed process.
11:58:47 AM [express] serving on port 4000
ğŸ“Š Generating metrics for window 1min. Events: 0, Total Events: 0
ğŸ”” Updating alerts. Current active: 0. Latest Metric Error Rate: 0
ğŸ“Š Generating metrics for window 1min. Events: 0, Total Events: 0
ğŸ”” Updating alerts. Current active: 0. Latest Metric Error Rate: 0
ğŸ“Š Generating metrics for window 1min. Events: 0, Total Events: 0
ğŸ”” Updating alerts. Current active: 0. Latest Metric Error Rate: 0
ğŸ“Š Generating metrics for window 1min. Events: 0, Total Events: 0
ğŸ”” Updating alerts. Current active: 0. Latest Metric Error Rate: 0
ğŸ§¹ Cleaned up old events. Current count: 0
ğŸ§¹ Cleaned up old events. Current count: 0
ğŸ“Š Generating metrics for window 1min. Events: 0, Total Events: 0
ğŸ”” Updating alerts. Current active: 0. Latest Metric Error Rate: 0
11:59:23 AM [express] GET /api/auth/me 200 in 16ms :: {"user":{"id":1,"username":"deepanimators","emaâ€¦
11:59:23 AM [express] GET /api/admin/ui-settings 200 in 4ms :: {"theme":"light","sidebarCollapsed":faâ€¦
11:59:23 AM [express] GET /api/admin/api-settings 200 in 5ms :: {"geminiApiKey":"","webhookUrl":"","mâ€¦
ğŸ“Š Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
11:59:24 AM [express] GET /api/analysis/history 200 in 84ms :: {"history":[{"id":108,"fileId":117,"fiâ€¦
ğŸ“Š Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
11:59:24 AM [express] GET /api/analysis/history 200 in 45ms :: {"history":[{"id":108,"fileId":117,"fiâ€¦
ğŸ” [DEBUG] Dashboard - Resolution Rate: 156 resolved out of 152719 total = 0.1%
ğŸ” [DEBUG] Total analysis history records: 93
ğŸ” [DEBUG] Sample record fields: [
  'id',              'fileId',
  'userId',          'filename',
  'fileType',        'fileSize',
  'uploadTimestamp', 'analysisTimestamp',
  'errorsDetected',  'anomalies',
  'predictions',     'suggestions',
  'totalErrors',     'criticalErrors',
  'highErrors',      'mediumErrors',
  'lowErrors',       'status',
  'errorMessage',    'aiSuggestions',
  'createdAt',       'processingTime',
  'modelAccuracy',   'progress',
  'currentStep'
]
ğŸ” [DEBUG] Sample modelAccuracy: 0
ğŸ” [DEBUG] Completed analyses with modelAccuracy: 92
11:59:29 AM [express] GET /api/dashboard/stats 200 in 5567ms :: {"totalFiles":96,"totalErrors":152719â€¦
ğŸ“Š Generating metrics for window 1min. Events: 0, Total Events: 0
ğŸ”” Updating alerts. Current active: 0. Latest Metric Error Rate: 0
Skipping body parsing for: /api/files
11:59:29 AM [express] GET /api/files 200 in 12ms :: {"files":[{"id":117,"filename":"files-17597387954â€¦
11:59:29 AM [express] GET /api/version 200 in 8ms :: {"version":"0.9.5","releaseDate":"2025-11-19","câ€¦
11:59:31 AM [express] GET /api/errors 200 in 1438ms :: {"errors":[{"id":155382,"fileId":117,"storeNumâ€¦
11:59:32 AM [express] GET /api/version 200 in 311ms :: {"version":"0.9.5","releaseDate":"2025-11-19",â€¦
11:59:32 AM [express] GET /api/analytics/health-status 200 in 21ms :: {"success":true,"data":{"statusâ€¦
11:59:32 AM [express] GET /api/analytics/metrics 200 in 173ms :: {"success":true,"data":{"window":"1mâ€¦
11:59:32 AM [express] GET /api/analytics/alerts 200 in 4ms :: {"success":true,"data":{"alerts":[],"toâ€¦
ğŸ“Š Generating metrics for window 1min. Events: 1, Total Events: 1
ğŸ”” Updating alerts. Current active: 0. Latest Metric Error Rate: 0
11:59:32 AM [express] POST /api/analytics/events 201 in 2ms :: {"success":true,"message":"Event recorâ€¦
ğŸ“Š Generating metrics for window 1min. Events: 2, Total Events: 2
ğŸ”” Updating alerts. Current active: 0. Latest Metric Error Rate: 0
11:59:32 AM [express] POST /api/analytics/events 201 in 4ms :: {"success":true,"message":"Event recorâ€¦
11:59:37 AM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"â€¦
11:59:37 AM [express] GET /api/analytics/metrics 200 in 1ms :: {"success":true,"data":{"window":"1minâ€¦
ğŸ“Š Generating metrics for window 1min. Events: 3, Total Events: 3
ğŸ”” Updating alerts. Current active: 0. Latest Metric Error Rate: 0
11:59:38 AM [express] POST /api/analytics/events 201 in 2ms :: {"success":true,"message":"Event recorâ€¦
ğŸ“Š Generating metrics for window 1min. Events: 4, Total Events: 4
ğŸ”” Updating alerts. Current active: 0. Latest Metric Error Rate: 25
11:59:38 AM [express] POST /api/analytics/events 201 in 2ms :: {"success":true,"message":"Event recorâ€¦
ğŸ“Š Generating metrics for window 1min. Events: 5, Total Events: 5
ğŸ”” Updating alerts. Current active: 2. Latest Metric Error Rate: 40
11:59:38 AM [express] POST /api/analytics/events 201 in 2ms :: {"success":true,"message":"Event recorâ€¦
ğŸ“Š Generating metrics for window 1min. Events: 6, Total Events: 6
ğŸ”” Updating alerts. Current active: 3. Latest Metric Error Rate: 33.33
11:59:38 AM [express] POST /api/analytics/events 201 in 7ms :: {"success":true,"message":"Event recorâ€¦
11:59:39 AM [express] GET /api/analytics/metrics 200 in 1ms :: {"success":true,"data":{"window":"1minâ€¦
11:59:39 AM [express] GET /api/analytics/alerts 200 in 2ms :: {"success":true,"data":{"alerts":[{"id"â€¦
ğŸ¤– Requesting AI analysis from Gemini...
âŒ Gemini API failed with status 404: {
  "error": {
    "code": 404,
    "message": "models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.",
    "status": "NOT_FOUND"
  }
}

11:59:39 AM [express] POST /api/analytics/ai-analysis 200 in 196ms :: {"success":true,"data":{"hasErrâ€¦
11:59:41 AM [express] GET /api/jira/status 200 in 2ms :: {"success":true,"data":{"configured":false,"â€¦
ğŸ“Š Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
11:59:41 AM [express] GET /api/analysis/history 200 in 12ms :: {"history":[{"id":108,"fileId":117,"fiâ€¦
11:59:42 AM [express] GET /api/analytics/health-status 200 in 0ms :: {"success":true,"data":{"status"â€¦
11:59:44 AM [express] GET /api/analytics/metrics 200 in 1ms :: {"success":true,"data":{"window":"1minâ€¦
ğŸ“Š Generating metrics for window 1min. Events: 6, Total Events: 6
ğŸ”” Updating alerts. Current active: 3. Latest Metric Error Rate: 33.33
ğŸ“Š Generating metrics for window 1min. Events: 6, Total Events: 6
ğŸ”” Updating alerts. Current active: 3. Latest Metric Error Rate: 33.33
11:59:58 AM [express] GET /api/auth/me 200 in 27ms :: {"user":{"id":1,"username":"deepanimators","emaâ€¦
11:59:59 AM [express] GET /api/analytics/metrics 200 in 1ms :: {"success":true,"data":{"window":"1minâ€¦
11:59:59 AM [express] GET /api/analytics/alerts 200 in 1ms :: {"success":true,"data":{"alerts":[{"id"â€¦
ğŸ¤– Requesting AI analysis from Gemini...
âŒ Gemini API failed with status 404: {
  "error": {
    "code": 404,
    "message": "models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.",
    "status": "NOT_FOUND"
  }
}

11:59:59 AM [express] POST /api/analytics/ai-analysis 200 in 140ms :: {"success":true,"data":{"hasErrâ€¦
ğŸ“Š Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:00:01 PM [express] GET /api/analysis/history 200 in 104ms :: {"history":[{"id":108,"fileId":117,"fâ€¦
ğŸ“Š Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:00:01 PM [express] GET /api/analysis/history 200 in 19ms :: {"history":[{"id":108,"fileId":117,"fiâ€¦
12:00:02 PM [express] GET /api/analytics/health-status 200 in 0ms :: {"success":true,"data":{"status"â€¦
ğŸ“Š Generating metrics for window 1min. Events: 6, Total Events: 6
ğŸ”” Updating alerts. Current active: 3. Latest Metric Error Rate: 33.33
12:00:04 PM [express] GET /api/analytics/metrics 200 in 2ms :: {"success":true,"data":{"window":"1minâ€¦
12:00:07 PM [express] GET /api/analytics/health-status 200 in 2ms :: {"success":true,"data":{"status"â€¦
12:00:09 PM [express] GET /api/analytics/metrics 200 in 2ms :: {"success":true,"data":{"window":"1minâ€¦
12:00:09 PM [express] GET /api/analytics/alerts 200 in 2ms :: {"success":true,"data":{"alerts":[{"id"â€¦
ğŸ¤– Requesting AI analysis from Gemini...
âŒ Gemini API failed with status 404: {
  "error": {
    "code": 404,
    "message": "models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.",
    "status": "NOT_FOUND"
  }
}

12:00:10 PM [express] POST /api/analytics/ai-analysis 200 in 281ms :: {"success":true,"data":{"hasErrâ€¦
ğŸ“Š Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:00:11 PM [express] GET /api/analysis/history 200 in 22ms :: {"history":[{"id":108,"fileId":117,"fiâ€¦
12:00:12 PM [express] GET /api/analytics/health-status 200 in 0ms :: {"success":true,"data":{"status"â€¦
ğŸ“Š Generating metrics for window 1min. Events: 6, Total Events: 6
ğŸ”” Updating alerts. Current active: 3. Latest Metric Error Rate: 33.33
12:00:14 PM [express] GET /api/analytics/metrics 200 in 2ms :: {"success":true,"data":{"window":"1minâ€¦
12:00:17 PM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"â€¦
ğŸ“Š Generating metrics for window 1min. Events: 6, Total Events: 6
ğŸ”” Updating alerts. Current active: 3. Latest Metric Error Rate: 33.33
12:00:19 PM [express] GET /api/analytics/metrics 200 in 1ms :: {"success":true,"data":{"window":"1minâ€¦
12:00:19 PM [express] GET /api/analytics/alerts 200 in 2ms :: {"success":true,"data":{"alerts":[{"id"â€¦
ğŸ¤– Requesting AI analysis from Gemini...
âŒ Gemini API failed with status 404: {
  "error": {
    "code": 404,
    "message": "models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.",
    "status": "NOT_FOUND"
  }
}

12:00:19 PM [express] POST /api/analytics/ai-analysis 200 in 112ms :: {"success":true,"data":{"hasErrâ€¦
ğŸ§¹ Cleaned up old events. Current count: 6
ğŸ§¹ Cleaned up old events. Current count: 6
ğŸ“Š Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:00:21 PM [express] GET /api/analysis/history 200 in 11ms :: {"history":[{"id":108,"fileId":117,"fiâ€¦
12:00:22 PM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"â€¦
ğŸ“Š Generating metrics for window 1min. Events: 6, Total Events: 6
ğŸ”” Updating alerts. Current active: 3. Latest Metric Error Rate: 33.33
12:00:24 PM [express] GET /api/analytics/metrics 200 in 1ms :: {"success":true,"data":{"window":"1minâ€¦
12:00:27 PM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"â€¦
12:00:29 PM [express] GET /api/analytics/metrics 200 in 1ms :: {"success":true,"data":{"window":"1minâ€¦
12:00:29 PM [express] GET /api/analytics/alerts 200 in 0ms :: {"success":true,"data":{"alerts":[{"id"â€¦
ğŸ¤– Requesting AI analysis from Gemini...
âŒ Gemini API failed with status 404: {
  "error": {
    "code": 404,
    "message": "models/gemini-1.5-flash is not found for API version v1beta, or is not supported for generateContent. Call ListModels to see the list of available models and their supported methods.",
    "status": "NOT_FOUND"
  }
}

12:00:29 PM [express] POST /api/analytics/ai-analysis 200 in 114ms :: {"success":true,"data":{"hasErrâ€¦
ğŸ“Š Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:00:31 PM [express] GET /api/analysis/history 200 in 12ms :: {"history":[{"id":108,"fileId":117,"fiâ€¦
ğŸ“Š Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:00:31 PM [express] GET /api/analysis/history 200 in 7ms :: {"history":[{"id":108,"fileId":117,"filâ€¦
12:00:32 PM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"â€¦
ğŸ“Š Generating metrics for window 1min. Events: 4, Total Events: 6
ğŸ”” Updating alerts. Current active: 3. Latest Metric Error Rate: 50
12:00:34 PM [express] GET /api/analytics/metrics 200 in 1ms :: {"success":true,"data":{"window":"1minâ€¦
12:00:37 PM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"â€¦
ğŸ“Š Generating metrics for window 1min. Events: 0, Total Events: 6
ğŸ”” Updating alerts. Current active: 3. Latest Metric Error Rate: 0
12:00:39 PM [express] GET /api/analytics/metrics 200 in 1ms :: {"success":true,"data":{"window":"1minâ€¦
12:00:39 PM [express] GET /api/analytics/alerts 200 in 0ms :: {"success":true,"data":{"alerts":[],"toâ€¦
ğŸ“Š Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:00:41 PM [express] GET /api/analysis/history 200 in 32ms :: {"history":[{"id":108,"fileId":117,"fiâ€¦
12:00:42 PM [express] GET /api/analytics/health-status 200 in 0ms :: {"success":true,"data":{"status"â€¦
ğŸ“Š Generating metrics for window 1min. Events: 0, Total Events: 6
ğŸ”” Updating alerts. Current active: 3. Latest Metric Error Rate: 0
12:00:44 PM [express] GET /api/analytics/metrics 200 in 2ms :: {"success":true,"data":{"window":"1minâ€¦
12:00:47 PM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"â€¦
12:00:49 PM [express] GET /api/analytics/metrics 200 in 1ms :: {"success":true,"data":{"window":"1minâ€¦
12:00:49 PM [express] GET /api/analytics/alerts 200 in 2ms :: {"success":true,"data":{"alerts":[],"toâ€¦
ğŸ“Š Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:00:51 PM [express] GET /api/analysis/history 200 in 12ms :: {"history":[{"id":108,"fileId":117,"fiâ€¦
12:00:52 PM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"â€¦
ğŸ“Š Generating metrics for window 1min. Events: 0, Total Events: 6
ğŸ”” Updating alerts. Current active: 3. Latest Metric Error Rate: 0
12:00:54 PM [express] GET /api/analytics/metrics 200 in 0ms :: {"success":true,"data":{"window":"1minâ€¦
12:00:57 PM [express] GET /api/analytics/health-status 200 in 1ms :: {"success":true,"data":{"status"â€¦
12:00:59 PM [express] GET /api/analytics/metrics 200 in 1ms :: {"success":true,"data":{"window":"1minâ€¦
12:00:59 PM [express] GET /api/analytics/alerts 200 in 8ms :: {"success":true,"data":{"alerts":[],"toâ€¦
ğŸ“Š Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:01:01 PM [express] GET /api/analysis/history 200 in 24ms :: {"history":[{"id":108,"fileId":117,"fiâ€¦
ğŸ“Š Analysis history request: { page: 1, limit: 20, fileIdFilter: null, userId: 1 }
12:01:01 PM [express] GET /api/analysis/history 200 in 19ms :: {"history":[{"id":108,"fileId":117,"fiâ€¦
12:01:02 PM [express] GET /api/analytics/health-status 200 in 0ms :: {"success":true,"data":{"status"â€¦
ğŸ“Š Generating metrics for window 1min. Events: 0, Total Events: 6
ğŸ”” Updating alerts. Current active: 3. Latest Metric Error Rate: 0
12:01:04 PM [express] GET /api/analytics/metrics 200 in 0ms :: {"success":true,"data":{"window":"1minâ€¦
