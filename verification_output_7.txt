
> stacklens-ai-platform@1.0.0 test:api
> playwright test tests/api

[dotenv@17.2.3] injecting env (14) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
[2m[WebServer] [22m
[2m[WebServer] [22m> stacklens-ai-platform@1.0.0 test:server /Users/deepak/Downloads/Projects/StackLens-AI-Deploy
[2m[WebServer] [22m> cross-env NODE_ENV=test node --import tsx --no-warnings apps/api/src/index.ts
[2m[WebServer] [22m
[2m[WebServer] [22m[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  write to custom object with { processEnv: myObject }
[2m[WebServer] [22mü§ñ AI Service initialized with 1 providers: gemini
[2m[WebServer] [22m[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
[2m[WebServer] [22m[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
[2m[WebServer] [22müöÄ RAG: Vector database initialized
[2m[WebServer] [22m{"level":"WARN","timestamp":"2025-11-25T19:11:24.751Z","logger":"kafkajs","message":"KafkaJS v2.0.0 switched default partitioner. To retain the same partitioning behavior as in previous versions, create the producer with the option \"createPartitioner: Partitioners.LegacyPartitioner\". See the migration guide at https://kafka.js.org/docs/migration-guide-v2.0.0#producer-new-default-partitioner for details. Silence this warning by setting the environment variable \"KAFKAJS_NO_PARTITIONER_WARNING=1\""}
[2m[WebServer] [22mSetting up SQLite database...
[2m[WebServer] [22m‚úÖ SQLite database initialized successfully
[2m[WebServer] [22müîÑ Starting server initialization...
[2m[WebServer] [22m‚úÖ Database tables initialized
[2m[WebServer] [22mStarting LogWatcher service for real-time monitoring...
[2m[WebServer] [22müìç Watching directories: /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/data, /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/logs
[2m[WebServer] [22m[LogWatcherService] Started watching 2 file(s)
[2m[WebServer] [22m‚úÖ LogWatcher service started successfully
[2m[WebServer] [22m‚úÖ Routes registered successfully
[2m[WebServer] [22müìö RAG: Indexing 50 resolved error patterns...
[2m[WebServer] [22m‚úÖ RAG: Knowledge base populated with 50 patterns
[2m[WebServer] [22m12:41:25 AM [express] serving on port 4001
[2m[WebServer] [22müîÑ Indexing existing errors for RAG system...
[2m[WebServer] [22m‚ÑπÔ∏è No errors with suggestions found for indexing
[2m[WebServer] [22m‚úÖ Enhanced RAG Suggestor initialized
[2m[WebServer] [22müéØ Enhanced RAG system ready with vector database
[2m[WebServer] [22müöÄ Starting Python vector database service...
[2m[WebServer] [22m‚úÖ Vector database service initialized
[2m[WebServer] [22m‚ö†Ô∏è Enhanced vector service not found, using fallback similarity search

Running 102 tests using 5 workers

[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  override existing env vars with { override: true }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
Starting authentication setup...
‚úì Auth state file verified
  ‚úì    1 [setup] ‚Ä∫ tests/auth.setup.ts:135:1 ‚Ä∫ verify auth state (566ms)
Using TEST_FIREBASE_TOKEN for authentication...
[2m[WebServer] [22m‚ö†Ô∏è Token verification failed - likely expired. Attempting to decode without verification for development mode...
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m12:41:31 AM [express] POST /api/auth/firebase-signin 200 in 269ms :: {"user":{"id":1,"username":"Test‚Ä¶
‚úì Token exchange successful
[2m[WebServer] [22m12:41:31 AM [express] GET /api/auth/me 200 in 1ms :: {"id":1,"email":"test@stacklens.ai","username":"‚Ä¶
[2m[WebServer] [22m12:41:31 AM [express] GET /api/admin/ui-settings 200 in 2ms :: {"theme":"light","sidebarCollapsed":fa‚Ä¶
[2m[WebServer] [22m12:41:31 AM [express] GET /api/admin/api-settings 200 in 2ms :: {"geminiApiKey":"AIzaSyAOu2YCkjimtYsv‚Ä¶
‚úì Authentication successful with session token
‚úì Authentication state saved to /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/.auth/user.json
  ‚úì    2 [setup] ‚Ä∫ tests/auth.setup.ts:15:1 ‚Ä∫ authenticate user (3.1s)
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
[2m[WebServer] [22m12:41:34 AM [express] POST /api/auth/firebase-verify 200 in 28ms :: {"valid":true,"user":{"id":1,"use‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
  ‚úì    3 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:27:5 ‚Ä∫ Authentication API ‚Ä∫ POST /api/auth/firebase-verify - should verify token (341ms)
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: [90mundefined[39m
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mNo file uploaded
[2m[WebServer] [22m12:41:34 AM [express] POST /api/upload 400 in 6ms :: {"message":"No file uploaded"}
  ‚úò    7 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:84:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should upload Excel file (130ms)
[2m[WebServer] [22m12:41:34 AM [express] GET /api/auth/me 200 in 1ms :: {"id":1,"email":"test@stacklens.ai","username":"‚Ä¶
  ‚úì    4 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:42:5 ‚Ä∫ Authentication API ‚Ä∫ GET /api/auth/me - should return current user (226ms)
[2m[WebServer] [22m12:41:34 AM [express] GET /api/auth/me 401 in 2ms :: {"message":"Authentication required"}
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m12:41:34 AM [express] POST /api/auth/firebase-signin 200 in 2ms :: {"user":{"id":1,"username":"Test U‚Ä¶
[2m[WebServer] [22mToken verification failed: Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
[2m[WebServer] [22m12:41:34 AM [express] POST /api/auth/firebase-signin 401 in 1ms :: {"message":"Invalid Firebase token‚Ä¶
  ‚úì    8 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:68:5 ‚Ä∫ Authentication API ‚Ä∫ GET /api/auth/me - should reject unauthenticated request (80ms)
  ‚úì    6 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:11:5 ‚Ä∫ Authentication API ‚Ä∫ POST /api/auth/firebase-signin - should authenticate user (150ms)
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: [90mundefined[39m
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mNo file uploaded
[2m[WebServer] [22m12:41:34 AM [express] POST /api/upload 400 in 1ms :: {"message":"No file uploaded"}
  ‚úì    5 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:54:5 ‚Ä∫ Authentication API ‚Ä∫ POST /api/auth/firebase-signin - should reject invalid token (224ms)
  ‚úò    9 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:119:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should reject invalid file type (27ms)
[2m[WebServer] [22m12:41:34 AM [express] GET /api/files 200 in 2ms :: {"files":[],"pagination":{"page":1,"limit":20,"tot‚Ä¶
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: [90mundefined[39m
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mNo file uploaded
[2m[WebServer] [22m12:41:34 AM [express] POST /api/upload 400 in 0ms :: {"message":"No file uploaded"}
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: [90mundefined[39m
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mNo file uploaded
[2m[WebServer] [22m12:41:34 AM [express] POST /api/upload 400 in 1ms :: {"message":"No file uploaded"}
[2m[WebServer] [22m12:41:34 AM [express] GET /api/files/undefined 400 in 1ms :: {"error":"Invalid file ID"}
[2m[WebServer] [22müóëÔ∏è Attempting to delete file with ID: NaN
[2m[WebServer] [22m‚ùå Invalid file ID provided
  ‚úò   10 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:138:5 ‚Ä∫ File Upload API ‚Ä∫ GET /api/files - should list uploaded files (26ms)
[2m[WebServer] [22m12:41:34 AM [express] DELETE /api/files/undefined 400 in 1ms :: {"message":"Invalid file ID"}
  ‚úò   11 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:154:5 ‚Ä∫ File Upload API ‚Ä∫ GET /api/files/:id - should get file details (22ms)
  ‚úò   12 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:179:5 ‚Ä∫ File Upload API ‚Ä∫ DELETE /api/files/:id - should delete file (23ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
[dotenv@17.2.3] injecting env (0) from .env -- tip: üë• sync secrets across teammates & machines: https://dotenvx.com/ops
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: [90mundefined[39m
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mNo file uploaded
[2m[WebServer] [22m12:41:35 AM [express] POST /api/upload 400 in 1ms :: {"message":"No file uploaded"}
  ‚úò   13 [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:104:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should upload CSV file (76ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê encrypt with Dotenvx: https://dotenvx.com
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
[2m[WebServer] [22m12:41:35 AM [express] GET /api/errors 200 in 2ms :: {"errors":[],"total":0,"page":1,"limit":20,"total‚Ä¶
  ‚úì   15 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:25:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by severity (156ms)
[2m[WebServer] [22m12:41:35 AM [express] GET /api/errors 200 in 54ms :: {"errors":[{"id":87,"fileId":null,"storeNumber":‚Ä¶
  ‚úì   14 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:5:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should retrieve all errors (180ms)
[2m[WebServer] [22m12:41:35 AM [express] GET /api/errors 200 in 2ms :: {"errors":[{"id":75,"fileId":null,"storeNumber":n‚Ä¶
  ‚úì   16 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:36:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by error type (149ms)
[2m[WebServer] [22m12:41:35 AM [express] GET /api/errors 200 in 48ms :: {"errors":[{"id":73,"fileId":null,"storeNumber":‚Ä¶
  ‚úò   17 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:58:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should search by message (100ms)
[2m[WebServer] [22m12:41:36 AM [express] GET /api/errors 200 in 72ms :: {"errors":[{"id":87,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:41:36 AM [express] GET /api/errors 200 in 2ms :: {"errors":[],"total":0,"page":1,"limit":20,"total‚Ä¶
  ‚úì   20 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:80:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by store (203ms)
[2m[WebServer] [22m12:41:36 AM [express] GET /api/errors 200 in 38ms :: {"errors":[{"id":87,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:41:36 AM [express] GET /api/errors 400 in 1ms :: {"error":"Invalid page parameter"}
  ‚úì   21 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:105:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should handle invalid query parameters gracefully (46ms)
  ‚úì   19 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:13:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should support pagination (342ms)
  ‚úò   18 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:69:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by resolved status (370ms)
[2m[WebServer] [22m12:41:36 AM [express] POST /api/errors 400 in 1ms :: {"error":"Missing required fields: message and s‚Ä¶
  ‚úì   23 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:136:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors ‚Ä∫ should validate required fields (56ms)
[2m[WebServer] [22m12:41:36 AM [express] POST /api/errors 201 in 6ms :: {"id":88,"fileId":null,"storeNumber":null,"kiosk‚Ä¶
  ‚úì   22 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:115:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors ‚Ä∫ should create new error (144ms)
[2m[WebServer] [22m12:41:36 AM [express] POST /api/errors 201 in 2ms :: {"id":89,"fileId":null,"storeNumber":null,"kiosk‚Ä¶
  ‚úì   24 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:165:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors ‚Ä∫ should set default values for optional fields (57ms)
[2m[WebServer] [22m12:41:36 AM [express] POST /api/errors 201 in 13ms :: {"id":90,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m12:41:36 AM [express] GET /api/errors/90 200 in 1ms :: {"id":90,"fileId":null,"storeNumber":null,"kio‚Ä¶
[2m[WebServer] [22m12:41:36 AM [express] GET /api/errors/99999999 404 in 1ms :: {"error":"Error not found","message":"Er‚Ä¶
  ‚úì   25 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:185:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/:id ‚Ä∫ should retrieve specific error by ID (61ms)
  ‚úì   26 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:208:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/:id ‚Ä∫ should return 404 for non-existent error (24ms)
[2m[WebServer] [22m12:41:36 AM [express] GET /api/errors/invalid-id 400 in 1ms :: {"error":"Invalid error ID","message":‚Ä¶
[2m[WebServer] [22m12:41:36 AM [express] POST /api/errors 201 in 3ms :: {"id":91,"fileId":null,"storeNumber":null,"kiosk‚Ä¶
  ‚úì   27 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:213:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/:id ‚Ä∫ should return 400 for invalid ID format (42ms)
[2m[WebServer] [22m12:41:36 AM [express] PATCH /api/errors/91 200 in 3ms :: {"id":91,"fileId":null,"storeNumber":null,"k‚Ä¶
  ‚úì   28 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:220:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ PATCH /api/errors/:id ‚Ä∫ should update error fields (50ms)
[2m[WebServer] [22m12:41:36 AM [express] POST /api/errors 201 in 2ms :: {"id":92,"fileId":null,"storeNumber":null,"kiosk‚Ä¶
[2m[WebServer] [22m12:41:36 AM [express] PATCH /api/errors/92 400 in 0ms :: {"error":"Invalid severity"}
[2m[WebServer] [22m12:41:36 AM [express] PATCH /api/errors/99999999 404 in 0ms :: {"error":"Error not found"}
  ‚úì   29 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:253:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ PATCH /api/errors/:id ‚Ä∫ should validate updated field values (25ms)
  ‚úì   30 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:271:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ PATCH /api/errors/:id ‚Ä∫ should return 404 when updating non-existent error (16ms)
[2m[WebServer] [22m12:41:36 AM [express] POST /api/errors 201 in 5ms :: {"id":93,"fileId":null,"storeNumber":null,"kiosk‚Ä¶
[2m[WebServer] [22m12:41:36 AM [express] DELETE /api/errors/99999999 404 in 2ms :: {"error":"Error not found"}
[2m[WebServer] [22m12:41:36 AM [express] DELETE /api/errors/93 200 in 2ms :: {"message":"Error deleted"}
[2m[WebServer] [22m12:41:36 AM [express] GET /api/errors/93 404 in 1ms :: {"error":"Error not found","message":"Error no‚Ä¶
  ‚úì   32 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:304:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ DELETE /api/errors/:id ‚Ä∫ should return 404 when deleting non-existent error (24ms)
  ‚úì   31 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:281:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ DELETE /api/errors/:id ‚Ä∫ should delete error (35ms)
[2m[WebServer] [22m12:41:36 AM [express] POST /api/errors/bulk 201 in 7ms :: {"created":3,"ids":[94,95,96]}
[2m[WebServer] [22m12:41:36 AM [express] POST /api/errors/bulk 400 in 4ms :: {"error":"Validation failed","invalidIndice‚Ä¶
  ‚úì   33 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:311:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/bulk ‚Ä∫ should create multiple errors in bulk (53ms)
  ‚úì   34 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:330:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/bulk ‚Ä∫ should handle validation errors in bulk creation (49ms)
[2m[WebServer] [22m12:41:36 AM [express] GET /api/errors/stats 400 in 1ms :: {"error":"Invalid error ID","message":"Inva‚Ä¶
[2m[WebServer] [22m12:41:36 AM [express] GET /api/errors/stats 400 in 2ms :: {"error":"Invalid error ID","message":"Inva‚Ä¶
  ‚úò   35 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:359:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should filter statistics by date range (37ms)
  ‚úò   36 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:347:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should retrieve error statistics (45ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
[2m[WebServer] [22m12:41:37 AM [express] GET /api/errors 200 in 24ms :: {"errors":[{"id":88,"fileId":null,"storeNumber":‚Ä¶
  ‚úì   37 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:47:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by date range (89ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  load multiple .env files with { path: ['.env.local', '.env'] }
[2m[WebServer] [22m12:41:37 AM [express] GET /api/errors 200 in 25ms :: {"errors":[{"id":88,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:41:37 AM [express] POST /api/errors/export 200 in 1ms :: [{"id":1,"message":"Test"}]
  ‚úì   39 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:392:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/export ‚Ä∫ should export errors as JSON (42ms)
  ‚úì   38 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:91:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should support sorting (86ms)
[2m[WebServer] [22m12:41:37 AM [express] POST /api/errors/export 200 in 1ms
  ‚úì   40 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:405:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/export ‚Ä∫ should export errors as Excel (21ms)
[2m[WebServer] [22m12:41:37 AM [express] GET /api/stores 200 in 3ms :: [{"id":1,"storeNumber":"STORE-1764097667423","nam‚Ä¶
  ‚úì   41 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:422:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/stores ‚Ä∫ should retrieve all stores (31ms)
[2m[WebServer] [22m12:41:37 AM [express] GET /api/stores 200 in 1ms :: {"stores":[{"id":1,"storeNumber":"STORE-176409766‚Ä¶
  ‚úì   43 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:430:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/stores ‚Ä∫ should support pagination for stores (22ms)
[2m[WebServer] [22m12:41:37 AM [express] GET /api/stores 200 in 1ms :: [{"id":1,"storeNumber":"STORE-1764097667423","nam‚Ä¶
[2m[WebServer] [22m12:41:37 AM [express] POST /api/stores 201 in 2ms :: {"id":9,"storeNumber":"STORE-1764097897236","nam‚Ä¶
  ‚úì   44 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:438:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/stores ‚Ä∫ should search stores by name (21ms)
[2m[WebServer] [22m12:41:37 AM [express] POST /api/errors 400 in 1ms :: {"error":"Invalid severity"}
  ‚úì   45 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:446:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/stores ‚Ä∫ should create new store (19ms)
  ‚úì   42 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:151:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors ‚Ä∫ should validate severity values (70ms)
[2m[WebServer] [22m12:41:37 AM [express] POST /api/stores 201 in 4ms :: {"id":10,"storeNumber":"STORE-1764097897254","na‚Ä¶
[2m[WebServer] [22mError creating store: SqliteError: UNIQUE constraint failed: stores.store_number
[2m[WebServer] [22m    at PreparedQuery.values [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/better-sqlite3/session.ts:156:26[90m)[39m
[2m[WebServer] [22m    at PreparedQuery.all [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/better-sqlite3/session.ts:124:21[90m)[39m
[2m[WebServer] [22m    at QueryPromise.all [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/sqlite-core/query-builders/insert.ts:396:26[90m)[39m
[2m[WebServer] [22m    at QueryPromise.execute [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/sqlite-core/query-builders/insert.ts:408:40[90m)[39m
[2m[WebServer] [22m    at QueryPromise.then [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4msrc[24m/query-promise.ts:31:15[90m)[39m
[2m[WebServer] [22m[90m    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)[39m {
[2m[WebServer] [22m  code: [32m'SQLITE_CONSTRAINT_UNIQUE'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22m12:41:37 AM [express] POST /api/stores 409 in 4ms :: {"message":"Store with this number already exist‚Ä¶
[2m[WebServer] [22m12:41:37 AM [express] GET /api/kiosks 200 in 0ms :: []
  ‚úì   46 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:463:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/stores ‚Ä∫ should prevent duplicate store numbers (25ms)
[2m[WebServer] [22m12:41:37 AM [express] GET /api/kiosks 200 in 1ms :: []
  ‚úì   47 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:481:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/kiosks ‚Ä∫ should retrieve all kiosks (17ms)
  ‚úì   48 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:489:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ GET /api/kiosks ‚Ä∫ should filter kiosks by store (22ms)
[2m[WebServer] [22m12:41:37 AM [express] POST /api/kiosks 400 in 1ms :: {"error":"Invalid store number - store does not ‚Ä¶
  ‚úò   49 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:501:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/kiosks ‚Ä∫ should create new kiosk (21ms)
[2m[WebServer] [22m12:41:37 AM [express] POST /api/kiosks 400 in 1ms :: {"error":"Invalid store number - store does not ‚Ä¶
[2m[WebServer] [22m12:41:37 AM [express] POST /api/ml/train 200 in 1ms :: {"jobId":"ml-job-1764097897311-pcv8vm2fa","sta‚Ä¶
  ‚úì   50 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:517:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/kiosks ‚Ä∫ should validate kiosk belongs to valid store (25ms)
  ‚úì   51 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:535:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ POST /api/ml/train ‚Ä∫ should initiate ML training job (25ms)
[2m[WebServer] [22m12:41:37 AM [express] POST /api/ml/train 200 in 1ms :: {"jobId":"ml-job-1764097897329-yuxsndnj4","sta‚Ä¶
[2m[WebServer] [22m12:41:37 AM [express] GET /api/ml/jobs/ml-job-1764097897329-yuxsndnj4 200 in 0ms :: {"jobId":"ml-job-‚Ä¶
[2m[WebServer] [22m12:41:37 AM [express] POST /api/ml/predict 200 in 0ms :: {"prediction":{"type":"Runtime","severity":"‚Ä¶
  ‚úì   52 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:568:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ GET /api/ml/jobs/:jobId ‚Ä∫ should retrieve training job status (20ms)
  ‚úì   53 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:594:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ POST /api/ml/predict ‚Ä∫ should make prediction with trained model (21ms)
[2m[WebServer] [22m12:41:37 AM [express] GET /api/ml/models 200 in 0ms :: [{"id":"model-1","name":"Production Model v1",‚Ä¶
  ‚úì   54 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:615:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ GET /api/ml/models ‚Ä∫ should list all trained models (24ms)
[2m[WebServer] [22m12:41:37 AM [express] GET /api/ml/models 200 in 0ms :: [{"id":"model-1","name":"Production Model v1",‚Ä¶
  ‚úì   55 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:623:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ GET /api/ml/models ‚Ä∫ should filter models by status (43ms)
[2m[WebServer] [22m12:41:37 AM [express] POST /api/ai/analyze 200 in 0ms :: {"analysis":"Simulated AI analysis for: unkn‚Ä¶
  ‚úì   56 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:637:9 ‚Ä∫ API Tests - AI Analysis Endpoints ‚Ä∫ POST /api/ai/analyze ‚Ä∫ should analyze error with AI (28ms)
[2m[WebServer] [22m12:41:37 AM [express] POST /api/ai/analyze 200 in 1ms :: {"analysis":"Simulated AI analysis for: unkn‚Ä¶
  ‚úì   57 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:655:9 ‚Ä∫ API Tests - AI Analysis Endpoints ‚Ä∫ POST /api/ai/analyze ‚Ä∫ should handle timeout for long-running analysis (20ms)
[2m[WebServer] [22m12:41:37 AM [express] POST /api/ai/suggest 200 in 1ms :: {"suggestions":[{"id":"fix-1","title":"Fix N‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîÑ add secrets lifecycle management: https://dotenvx.com/ops
  ‚úì   58 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:666:9 ‚Ä∫ API Tests - AI Analysis Endpoints ‚Ä∫ POST /api/ai/suggest ‚Ä∫ should provide fix suggestions (16ms)
[2m[WebServer] [22m12:41:37 AM [express] POST /api/ai/summarize 200 in 0ms :: {"summary":"Simulated summary of multiple ‚Ä¶
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: [90mundefined[39m
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mNo file uploaded
[2m[WebServer] [22m12:41:37 AM [express] POST /api/upload 400 in 0ms :: {"message":"No file uploaded"}
  ‚úì   59 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:685:9 ‚Ä∫ API Tests - AI Analysis Endpoints ‚Ä∫ POST /api/ai/summarize ‚Ä∫ should summarize multiple errors (24ms)
  ‚úò   60 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:707:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should handle Excel file upload (13ms)
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: [90mundefined[39m
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mNo file uploaded
[2m[WebServer] [22m12:41:37 AM [express] POST /api/upload 400 in 0ms :: {"message":"No file uploaded"}
  ‚úò   61 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:726:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should reject files exceeding size limit (30ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: üóÇÔ∏è backup and recover secrets: https://dotenvx.com/ops
[2m[WebServer] [22m12:41:37 AM [express] GET /api/errors/stats/by-store 200 in 7ms :: [{"storeNumber":"unknown","total":‚Ä¶
  ‚úì   62 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:369:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should provide statistics by store (62ms)
[2m[WebServer] [22m12:41:37 AM [express] POST /api/errors/export 200 in 0ms
  ‚úì   63 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:379:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ POST /api/errors/export ‚Ä∫ should export errors as CSV (138ms)
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m12:41:37 AM [express] POST /api/auth/firebase 200 in 3ms :: {"userId":1,"user":{"id":1,"username":"Te‚Ä¶
  ‚úò   64 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:785:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/firebase ‚Ä∫ should authenticate with valid Firebase token (165ms)
[2m[WebServer] [22mToken verification failed: Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
[2m[WebServer] [22m12:41:37 AM [express] POST /api/auth/firebase 401 in 1ms :: {"message":"Invalid Firebase token"}
  ‚úì   65 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:799:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/firebase ‚Ä∫ should reject invalid token (216ms)
[2m[WebServer] [22m12:41:38 AM [express] GET /api/admin/users 401 in 0ms :: {"message":"Authentication required"}
  ‚úì   66 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:831:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ GET /api/admin/users ‚Ä∫ should require admin role (57ms)
[2m[WebServer] [22mToken verification failed: Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
[2m[WebServer] [22m‚úÖ Using mock token for user: test@stacklens.ai
[2m[WebServer] [22müëë Granting admin role to test@stacklens.ai
[2m[WebServer] [22m12:41:38 AM [express] POST /api/auth/firebase-signin 200 in 3ms :: {"user":{"id":1,"username":"Test U‚Ä¶
Auth response: {
  user: {
    id: [33m1[39m,
    username: [32m'Test User'[39m,
    email: [32m'test@stacklens.ai'[39m,
    role: [32m'admin'[39m,
    firstName: [32m'Test'[39m,
    lastName: [32m'User'[39m,
    profileImageUrl: [32m'https://example.com/avatar.jpg'[39m,
    department: [1mnull[22m,
    isActive: [33mtrue[39m,
    lastLogin: [32m'2025-11-25T19:11:38.000Z'[39m,
    createdAt: [32m'+057872-01-12T00:20:00.000Z'[39m,
    updatedAt: [32m'+057872-01-12T00:20:00.000Z'[39m
  },
  token: [32m'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImlhdCI6MTc2NDA5Nzg5OCwiZXhwIjoxNzY0MTg0Mjk4fQ.Xwo2WFawNYdHU1OdqfJa1dtvxdJSZRsTy07e7rhjBfI'[39m,
  provider: [32m'firebase'[39m
}
[2m[WebServer] [22m12:41:38 AM [express] GET /api/admin/users 200 in 1ms :: [{"id":1,"username":"Test User","email":"tes‚Ä¶
  ‚úì   67 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:838:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ GET /api/admin/users ‚Ä∫ should allow access with admin token (35ms)
[2m[WebServer] [22m12:41:38 AM [express] POST /api/errors 400 in 0ms :: {"error":"Missing required fields: message and s‚Ä¶
  ‚úì   68 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:871:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should reject requests with invalid Content-Type (12ms)
[2m[WebServer] [22m‚ùå Server error: SyntaxError: Unexpected token '"', ""{invalid json}"" is not valid JSON
[2m[WebServer] [22m    at JSON.parse (<anonymous>)
[2m[WebServer] [22m    at createStrictSyntaxError [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mbody-parser[24m/lib/types/json.js:169:10[90m)[39m
[2m[WebServer] [22m    at parse [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mbody-parser[24m/lib/types/json.js:86:15[90m)[39m
[2m[WebServer] [22m    at [90m/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mbody-parser[24m/lib/read.js:128:18
[2m[WebServer] [22m[90m    at AsyncResource.runInAsyncScope (node:async_hooks:214:14)[39m
[2m[WebServer] [22m    at invokeCallback [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mraw-body[24m/index.js:238:16[90m)[39m
[2m[WebServer] [22m    at done [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mraw-body[24m/index.js:227:7[90m)[39m
[2m[WebServer] [22m    at IncomingMessage.onEnd [90m(/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/[39mnode_modules/[4mraw-body[24m/index.js:287:7[90m)[39m
[2m[WebServer] [22m[90m    at IncomingMessage.emit (node:events:518:28)[39m
[2m[WebServer] [22m[90m    at endReadableNT (node:internal/streams/readable:1698:12)[39m {
[2m[WebServer] [22m  expose: [33mtrue[39m,
[2m[WebServer] [22m  statusCode: [33m400[39m,
[2m[WebServer] [22m  status: [33m400[39m,
[2m[WebServer] [22m  body: [32m'"{invalid json}"'[39m,
[2m[WebServer] [22m  type: [32m'entity.parse.failed'[39m
[2m[WebServer] [22m}
  ‚úì   69 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:882:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should validate JSON syntax (12ms)
[2m[WebServer] [22m12:41:38 AM [express] POST /api/errors 201 in 18ms :: {"id":98,"fileId":null,"storeNumber":null,"kios‚Ä¶
  ‚úò   70 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:893:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should enforce maximum payload size (54ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  enable debug logging with { debug: true }
[2m[WebServer] [22m12:41:38 AM [express] POST /api/ml/train 400 in 0ms :: {"error":"Invalid modelType"}
  ‚úì   71 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:554:9 ‚Ä∫ API Tests - ML Training Endpoints ‚Ä∫ POST /api/ml/train ‚Ä∫ should validate training configuration (74ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
[2m[WebServer] [22m12:41:38 AM [express] POST /api/errors 400 in 0ms :: {"error":"Missing required fields: message and s‚Ä¶
  ‚úì   72 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:918:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should handle missing request body (24ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  specify custom .env file path with { path: '/custom/path/.env' }
  ‚úò   73 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:924:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should validate URL parameter formats (101ms)
[2m[WebServer] [22m12:41:38 AM [express] GET /api/errors 200 in 65ms :: {"errors":[{"id":98,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: [90mundefined[39m
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mNo file uploaded
[2m[WebServer] [22m12:41:38 AM [express] POST /api/upload 400 in 1ms :: {"message":"No file uploaded"}
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîë add access controls to secrets: https://dotenvx.com/ops
  ‚úì   74 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:742:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should reject unsupported file types (76ms)
[2m[WebServer] [22mPOST /api/upload hit
[2m[WebServer] [22mreq.file: [90mundefined[39m
[2m[WebServer] [22mreq.user: {
[2m[WebServer] [22m  id: [33m1[39m,
[2m[WebServer] [22m  email: [32m'test@stacklens.ai'[39m,
[2m[WebServer] [22m  username: [32m'testuser'[39m,
[2m[WebServer] [22m  role: [32m'admin'[39m
[2m[WebServer] [22m}
[2m[WebServer] [22mNo file uploaded
[2m[WebServer] [22m12:41:38 AM [express] POST /api/upload 400 in 0ms :: {"message":"No file uploaded"}
  ‚úì   76 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:941:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should return proper Content-Type headers (53ms)
[2m[WebServer] [22m12:41:38 AM [express] GET /api/errors 200 in 33ms :: {"errors":[{"id":98,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:41:38 AM [express] GET /api/uploads/undefined 400 in 1ms :: {"message":"Invalid file ID"}
  ‚úò   75 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:760:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ GET /api/uploads/:fileId ‚Ä∫ should retrieve upload status (118ms)
  ‚úì   78 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:948:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should include CORS headers (52ms)
[2m[WebServer] [22m12:41:38 AM [express] GET /api/errors 200 in 36ms :: {"errors":[{"id":98,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22mToken verification failed: Decoding Firebase ID token failed. Make sure you passed the entire string JWT which represents an ID token. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.
[2m[WebServer] [22m12:41:38 AM [express] POST /api/auth/firebase 401 in 1ms :: {"message":"Invalid Firebase token"}
  ‚úì   79 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:969:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should include pagination metadata (49ms)
[2m[WebServer] [22m12:41:38 AM [express] GET /api/errors 200 in 29ms :: {"errors":[{"id":98,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:41:38 AM [express] POST /api/auth/logout 404 in 2ms
  ‚úò   77 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:811:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/logout ‚Ä∫ should logout user (150ms)
  ‚úì   80 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:981:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should return timestamps in ISO format (47ms)
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
[2m[WebServer] [22m12:41:38 AM [express] GET /api/errors 200 in 34ms :: {"errors":[{"id":98,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:41:38 AM [express] GET /api/nonexistent 404 in 2ms
  ‚úì   81 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1003:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should return 404 for non-existent routes (12ms)
[2m[WebServer] [22m12:41:39 AM [express] GET /api/errors/not-a-number 400 in 1ms :: {"error":"Invalid error ID","message‚Ä¶
  ‚úì   82 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1009:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should handle malformed route parameters (17ms)
[2m[WebServer] [22m12:41:39 AM [express] POST /api/errors 400 in 1ms :: {"error":"Missing required fields: message and s‚Ä¶
  ‚úò   84 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1015:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should provide helpful error messages (9ms)
  ‚úì   83 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:907:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should validate required headers (79ms)
[2m[WebServer] [22m12:41:39 AM [express] GET /api/errors 200 in 36ms :: {"errors":[{"id":98,"fileId":null,"storeNumber":‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚öôÔ∏è  suppress all logs with { quiet: true }
[2m[WebServer] [22m12:41:39 AM [express] GET /api/errors 200 in 164ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:39 AM [express] GET /api/errors 200 in 231ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
[2m[WebServer] [22m12:41:39 AM [express] GET /api/errors 200 in 291ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:39 AM [express] GET /api/errors 200 in 251ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: üì° add observability to secrets: https://dotenvx.com/ops
[2m[WebServer] [22m12:41:40 AM [express] GET /api/errors 200 in 579ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent building .env in docker: https://dotenvx.com/prebuild
[2m[WebServer] [22m12:41:40 AM [express] GET /api/errors 200 in 649ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:40 AM [express] GET /api/errors 200 in 145ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:40 AM [express] GET /api/errors 200 in 567ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:40 AM [express] GET /api/errors 200 in 259ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:40 AM [express] GET /api/errors 200 in 209ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:40 AM [express] GET /api/errors 200 in 197ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:40 AM [express] GET /api/errors 200 in 112ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:40 AM [express] GET /api/errors 200 in 232ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:40 AM [express] GET /api/errors 200 in 90ms :: {"errors":[{"id":98,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:41:40 AM [express] GET /api/errors 200 in 218ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:40 AM [express] GET /api/errors 200 in 269ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 242ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 311ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 282ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 106ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 246ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 113ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 161ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 169ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 206ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 147ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 261ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 310ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 236ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:41 AM [express] GET /api/errors 200 in 378ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 119ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 342ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 139ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 115ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 206ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 140ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 189ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 152ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 201ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 172ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 115ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 199ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 107ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:42 AM [express] GET /api/errors 200 in 248ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:43 AM [express] GET /api/errors 200 in 448ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:43 AM [express] GET /api/errors 200 in 330ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:43 AM [express] GET /api/errors 200 in 496ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:43 AM [express] GET /api/errors 200 in 229ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:43 AM [express] GET /api/errors 200 in 222ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:43 AM [express] GET /api/errors 200 in 152ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:43 AM [express] GET /api/errors 200 in 158ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:43 AM [express] GET /api/errors 200 in 85ms :: {"errors":[{"id":98,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:41:43 AM [express] GET /api/errors 200 in 221ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:43 AM [express] GET /api/errors 200 in 358ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:43 AM [express] GET /api/errors 200 in 392ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 475ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 461ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 334ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 303ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 210ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 140ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 219ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 192ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 187ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 172ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 139ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 210ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 160ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 152ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 85ms :: {"errors":[{"id":98,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 193ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:44 AM [express] GET /api/errors 200 in 274ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 275ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 223ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 253ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 257ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 139ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 273ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 171ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 166ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 160ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 157ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 192ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 143ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 193ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:45 AM [express] GET /api/errors 200 in 211ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:46 AM [express] GET /api/errors 200 in 233ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:46 AM [express] GET /api/errors 200 in 183ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:46 AM [express] GET /api/errors 200 in 176ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:46 AM [express] GET /api/errors 200 in 159ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:46 AM [express] GET /api/errors 200 in 184ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:46 AM [express] GET /api/errors 200 in 176ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:46 AM [express] GET /api/errors 200 in 247ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:46 AM [express] GET /api/errors 200 in 189ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:46 AM [express] GET /api/errors 200 in 114ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:46 AM [express] GET /api/errors 200 in 193ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:46 AM [express] GET /api/errors 200 in 90ms :: {"errors":[{"id":98,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:41:46 AM [express] GET /api/errors 200 in 272ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:47 AM [express] GET /api/errors 200 in 563ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:47 AM [express] GET /api/errors 200 in 750ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:47 AM [express] GET /api/errors 200 in 349ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:47 AM [express] GET /api/errors 200 in 734ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:47 AM [express] GET /api/errors 200 in 195ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:47 AM [express] GET /api/errors 200 in 113ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:47 AM [express] GET /api/errors 200 in 214ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:47 AM [express] GET /api/errors 200 in 153ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:47 AM [express] GET /api/errors 200 in 215ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:47 AM [express] GET /api/errors 200 in 131ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:47 AM [express] GET /api/errors 200 in 215ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:47 AM [express] GET /api/errors 200 in 132ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:48 AM [express] GET /api/errors 200 in 533ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:48 AM [express] GET /api/errors 200 in 384ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:48 AM [express] GET /api/errors 200 in 292ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:48 AM [express] GET /api/errors 200 in 295ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:48 AM [express] GET /api/errors 200 in 163ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:48 AM [express] GET /api/errors 200 in 167ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:48 AM [express] GET /api/errors 200 in 169ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:48 AM [express] GET /api/errors 200 in 125ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:48 AM [express] GET /api/errors 200 in 206ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:48 AM [express] GET /api/errors 200 in 194ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:48 AM [express] GET /api/errors 200 in 118ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:49 AM [express] GET /api/errors 200 in 343ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:49 AM [express] GET /api/errors 200 in 292ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:49 AM [express] GET /api/errors 200 in 366ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:49 AM [express] GET /api/errors 200 in 404ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:49 AM [express] GET /api/errors 200 in 560ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:49 AM [express] GET /api/errors 200 in 257ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:49 AM [express] GET /api/errors 200 in 568ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:49 AM [express] GET /api/errors 200 in 218ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:50 AM [express] GET /api/errors 200 in 233ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:50 AM [express] GET /api/errors 200 in 24ms :: {"errors":[],"total":0,"page":1,"limit":20,"tota‚Ä¶
[2m[WebServer] [22m12:41:50 AM [express] GET /api/errors 200 in 79ms :: {"errors":[{"id":98,"fileId":null,"storeNumber":‚Ä¶
  ‚úì   86 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:930:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should handle special characters in query params (10.8s)
[2m[WebServer] [22m12:41:50 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:50 AM [express] GET /api/errors 200 in 210ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
  ‚úì   87 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:959:5 ‚Ä∫ API Tests - Response Format Validation ‚Ä∫ should return consistent error response format (10.5s)
[2m[WebServer] [22m12:41:50 AM [express] GET /api/errors 200 in 156ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:50 AM [express] GET /api/errors 200 in 482ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
  ‚úì   90 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1057:5 ‚Ä∫ API Tests - Rate Limiting ‚Ä∫ should include rate limit headers (1.3s)
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors 200 in 1203ms :: {"errors":[{"id":98,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors 200 in 1108ms :: {"errors":[{"id":98,"fileId":null,"storeNumber‚Ä¶
  ‚úì   88 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:995:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should handle database connection errors gracefully (11.2s)
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors 200 in 1088ms :: {"errors":[{"id":98,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors 200 in 950ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors 200 in 377ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors 400 in 0ms :: {"error":"Invalid page parameter"}
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors/999999 404 in 0ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   93 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1100:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle negative page numbers (139ms)
  ‚úì   92 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1093:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle page=0 (279ms)
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors 200 in 112ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors/999999 404 in 4ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors/999999 404 in 6ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:51 AM [express] GET /api/errors/999999 404 in 5ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:52 AM [express] GET /api/errors/999999 404 in 78ms :: {"error":"Error not found","message":"Err‚Ä¶
[2m[WebServer] [22m12:41:52 AM [express] GET /api/errors/999999 404 in 11ms :: {"error":"Error not found","message":"Err‚Ä¶
[2m[WebServer] [22m12:41:52 AM [express] GET /api/errors 200 in 448ms :: {"errors":[],"total":93,"page":999999,"limit":1‚Ä¶
[2m[WebServer] [22m12:41:52 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   94 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1106:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle excessive page numbers (698ms)
[2m[WebServer] [22m12:41:52 AM [express] GET /api/errors 200 in 285ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
  ‚úò   95 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1116:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle limit=0 (952ms)
[2m[WebServer] [22m12:41:52 AM [express] GET /api/errors 400 in 1ms :: {"error":"Invalid limit parameter"}
  ‚úì   96 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1122:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should enforce maximum limit (260ms)
[2m[WebServer] [22m12:41:53 AM [express] POST /api/errors 201 in 4ms :: {"id":99,"fileId":null,"storeNumber":null,"kiosk‚Ä¶
[2m[WebServer] [22m12:41:53 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:53 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:53 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:53 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:53 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:53 AM [express] GET /api/errors/999999 404 in 2ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:53 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:53 AM [express] GET /api/errors/999999 404 in 8ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:53 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
[2m[WebServer] [22m12:41:53 AM [express] GET /api/errors/999999 404 in 1ms :: {"error":"Error not found","message":"Erro‚Ä¶
  ‚úì   89 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1027:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should handle concurrent request failures (13.2s)
[2m[WebServer] [22m12:41:53 AM [express] GET /api/errors 200 in 491ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:53 AM [express] GET /api/errors 200 in 615ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:53 AM [express] POST /api/errors 201 in 2ms :: {"id":100,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m12:41:53 AM [express] GET /api/errors 200 in 990ms :: {"errors":[{"id":98,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:54 AM [express] PUT /api/errors/100 404 in 48ms
[2m[WebServer] [22m12:41:54 AM [express] PUT /api/errors/100 404 in 46ms
[2m[WebServer] [22m12:41:54 AM [express] PUT /api/errors/100 404 in 46ms
[2m[WebServer] [22m12:41:54 AM [express] PUT /api/errors/100 404 in 46ms
[2m[WebServer] [22m12:41:54 AM [express] PUT /api/errors/100 404 in 46ms
  ‚úò   98 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1164:5 ‚Ä∫ API Tests - Concurrent Operations ‚Ä∫ should prevent race conditions on updates (467ms)
[2m[WebServer] [22m12:41:54 AM [express] GET /api/errors 200 in 1356ms :: {"errors":[{"id":98,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:54 AM [express] GET /api/errors 200 in 895ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: üîê prevent committing .env to code: https://dotenvx.com/precommit
[2m[WebServer] [22m12:41:54 AM [express] GET /api/errors 200 in 376ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:54 AM [express] GET /api/errors 200 in 381ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:54 AM [express] GET /api/errors 200 in 1026ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:54 AM [express] GET /api/errors 200 in 180ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:54 AM [express] GET /api/errors 200 in 396ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:55 AM [express] GET /api/errors 200 in 256ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:55 AM [express] GET /api/errors 200 in 1726ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:55 AM [express] GET /api/errors 200 in 274ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[dotenv@17.2.3] injecting env (0) from .env -- tip: ‚úÖ audit secrets and track compliance: https://dotenvx.com/ops
[2m[WebServer] [22m12:41:55 AM [express] GET /api/errors 200 in 176ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:55 AM [express] GET /api/errors 200 in 285ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:55 AM [express] GET /api/errors 200 in 1550ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:55 AM [express] GET /api/errors 200 in 1266ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:55 AM [express] GET /api/errors 200 in 462ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:55 AM [express] GET /api/errors 200 in 491ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:56 AM [express] GET /api/errors 200 in 1109ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:56 AM [express] GET /api/errors 200 in 2099ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:56 AM [express] GET /api/errors 200 in 2624ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:56 AM [express] GET /api/errors 200 in 1413ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:56 AM [express] GET /api/errors 200 in 526ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:56 AM [express] GET /api/errors 200 in 1061ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:56 AM [express] GET /api/errors 200 in 2908ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:56 AM [express] GET /api/errors 200 in 404ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:56 AM [express] GET /api/errors 200 in 89ms :: {"errors":[{"id":99,"fileId":null,"storeNumber":‚Ä¶
  ‚úì   85 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1041:5 ‚Ä∫ API Tests - Rate Limiting ‚Ä∫ should implement rate limiting (17.8s)
[2m[WebServer] [22m12:41:57 AM [express] GET /api/errors 200 in 2855ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:57 AM [express] GET /api/errors 200 in 2728ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:57 AM [express] GET /api/errors 200 in 223ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:57 AM [express] GET /api/errors 200 in 130ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:57 AM [express] GET /api/errors 200 in 318ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:57 AM [express] GET /api/errors 200 in 319ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:57 AM [express] GET /api/errors 200 in 460ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:57 AM [express] GET /api/errors 200 in 160ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:57 AM [express] GET /api/errors 200 in 442ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:57 AM [express] GET /api/errors 200 in 400ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:57 AM [express] GET /api/errors 200 in 317ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:57 AM [express] GET /api/errors 200 in 195ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:58 AM [express] GET /api/errors 200 in 191ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:58 AM [express] GET /api/errors 200 in 183ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:58 AM [express] GET /api/errors 200 in 255ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:58 AM [express] GET /api/errors 200 in 644ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:58 AM [express] GET /api/errors 200 in 741ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:58 AM [express] GET /api/errors 200 in 732ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:58 AM [express] GET /api/errors 200 in 679ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:58 AM [express] GET /api/errors 200 in 181ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:59 AM [express] GET /api/errors 200 in 523ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:59 AM [express] GET /api/errors 200 in 589ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:59 AM [express] GET /api/errors 200 in 460ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:59 AM [express] GET /api/errors 200 in 392ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:59 AM [express] GET /api/errors 200 in 2635ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:41:59 AM [express] GET /api/errors 200 in 217ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
  ‚úì  101 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1208:5 ‚Ä∫ API Tests - Cache Control ‚Ä∫ should respect If-None-Match for conditional requests (2.8s)
[2m[WebServer] [22m12:41:59 AM [express] GET /api/errors 304 in 55ms :: {"errors":[{"id":99,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:41:59 AM [express] GET /api/errors 200 in 282ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:59 AM [express] GET /api/errors 200 in 338ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:41:59 AM [express] GET /api/errors 200 in 364ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 83ms :: {"errors":[{"id":99,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 205ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 102ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 87ms :: {"errors":[{"id":99,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 160ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 183ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 216ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 198ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 192ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 251ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 174ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 270ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 196ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 152ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 89ms :: {"errors":[{"id":99,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 80ms :: {"errors":[{"id":99,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 62ms :: {"errors":[{"id":99,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:42:00 AM [express] GET /api/errors 200 in 146ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
  ‚úì  102 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1223:5 ‚Ä∫ API Tests - Cache Control ‚Ä∫ should support If-Modified-Since (1.2s)
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 1118ms :: {"errors":[{"id":99,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 179ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 173ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 166ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 173ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 27ms :: {"errors":[{"id":99,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 120ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 178ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 157ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 150ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 183ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 305ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 254ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 283ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 253ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 129ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 207ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 149ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 62ms :: {"errors":[{"id":99,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:42:01 AM [express] GET /api/errors 200 in 157ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 153ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 146ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 140ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 148ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 140ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 105ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 163ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 203ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 260ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 496ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 441ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 140ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 97ms :: {"errors":[{"id":99,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 75ms :: {"errors":[{"id":99,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:42:02 AM [express] GET /api/errors 200 in 85ms :: {"errors":[{"id":99,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 84ms :: {"errors":[{"id":99,"fileId":null,"storeNumber":‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 145ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] POST /api/errors 201 in 1ms :: {"id":101,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] POST /api/errors 201 in 1ms :: {"id":102,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] POST /api/errors 201 in 1ms :: {"id":103,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] POST /api/errors 201 in 2ms :: {"id":104,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] POST /api/errors 201 in 1ms :: {"id":105,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] POST /api/errors 201 in 1ms :: {"id":106,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] POST /api/errors 201 in 1ms :: {"id":107,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] POST /api/errors 201 in 1ms :: {"id":108,"fileId":null,"storeNumber":null,"kios‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] POST /api/errors 201 in 1ms :: {"id":109,"fileId":null,"storeNumber":null,"kios‚Ä¶
  ‚úì   97 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1147:5 ‚Ä∫ API Tests - Concurrent Operations ‚Ä∫ should handle concurrent writes with proper isolation (10.1s)
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 95ms :: {"errors":[{"id":101,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 102ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 67ms :: {"errors":[{"id":101,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 141ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 422ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 167ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 139ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 92ms :: {"errors":[{"id":101,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 153ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 494ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 480ms :: {"errors":[{"id":99,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 207ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 141ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 164ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 215ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:03 AM [express] GET /api/errors 200 in 213ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 263ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 352ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 133ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 286ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 138ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 319ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 301ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 305ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 278ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 202ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 74ms :: {"errors":[{"id":101,"fileId":null,"storeNumber"‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 150ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 115ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:04 AM [express] GET /api/errors 200 in 146ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:05 AM [express] GET /api/errors 200 in 170ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:05 AM [express] GET /api/errors 200 in 304ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:05 AM [express] GET /api/errors 200 in 280ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:05 AM [express] GET /api/errors 200 in 184ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:05 AM [express] GET /api/errors 200 in 271ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:05 AM [express] GET /api/errors 200 in 329ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
  ‚úì  100 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1197:5 ‚Ä∫ API Tests - Cache Control ‚Ä∫ should include appropriate cache headers (10.3s)
[2m[WebServer] [22m12:42:05 AM [express] GET /api/errors 200 in 286ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
  ‚úì   91 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1073:5 ‚Ä∫ API Tests - Rate Limiting ‚Ä∫ should reset rate limits after time window (15.5s)
[2m[WebServer] [22m12:42:05 AM [express] GET /api/errors 200 in 1161ms :: {"errors":[{"id":101,"fileId":null,"storeNumbe‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 625ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 509ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 505ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 542ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 503ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 479ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 466ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 454ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 389ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 459ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 446ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 392ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 471ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 455ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 471ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
  ‚úì   99 [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1136:5 ‚Ä∫ API Tests - Concurrent Operations ‚Ä∫ should handle concurrent reads safely (11.7s)
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 457ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶
[2m[WebServer] [22m12:42:06 AM [express] GET /api/errors 200 in 463ms :: {"errors":[{"id":101,"fileId":null,"storeNumber‚Ä¶


  1) [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:84:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should upload Excel file 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m400[39m

      94 |         });
      95 |
    > 96 |         expect(response.status()).toBe(200);
         |                                   ^
      97 |
      98 |         const data = await response.json();
      99 |         expect(data).toHaveProperty('fileId');
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/auth-upload.test.ts:96:35

  2) [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:104:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should upload CSV file 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m400[39m

      114 |         });
      115 |
    > 116 |         expect(response.status()).toBe(200);
          |                                   ^
      117 |     });
      118 |
      119 |     test('POST /api/upload - should reject invalid file type', async ({ apiContext }) => {
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/auth-upload.test.ts:116:35

  3) [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:119:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should reject invalid file type 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected substring: [32m"Invalid file type"[39m
    Received string:    [31m"No file uploaded"[39m

      133 |         const data = await response.json();
      134 |         expect(data).toHaveProperty('message');
    > 135 |         expect(data.message).toContain('Invalid file type');
          |                              ^
      136 |     });
      137 |
      138 |     test('GET /api/files - should list uploaded files', async ({ apiContext }) => {
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/auth-upload.test.ts:135:30

  4) [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:138:5 ‚Ä∫ File Upload API ‚Ä∫ GET /api/files - should list uploaded files 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mtrue[39m
    Received: [31mfalse[39m

      143 |
      144 |         const data = await response.json();
    > 145 |         expect(Array.isArray(data)).toBe(true);
          |                                     ^
      146 |
      147 |         if (data.length > 0) {
      148 |             expect(data[0]).toHaveProperty('id');
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/auth-upload.test.ts:145:37

  5) [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:154:5 ‚Ä∫ File Upload API ‚Ä∫ GET /api/files/:id - should get file details 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m400[39m

      170 |         const response = await apiContext.get(`/api/files/${fileId}`);
      171 |
    > 172 |         expect(response.status()).toBe(200);
          |                                   ^
      173 |
      174 |         const data = await response.json();
      175 |         expect(data).toHaveProperty('id', fileId);
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/auth-upload.test.ts:172:35

  6) [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:179:5 ‚Ä∫ File Upload API ‚Ä∫ DELETE /api/files/:id - should delete file 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m200[39m
    Received: [31m400[39m

      195 |         const response = await apiContext.delete(`/api/files/${fileId}`);
      196 |
    > 197 |         expect(response.status()).toBe(200);
          |                                   ^
      198 |
      199 |         const data = await response.json();
      200 |         expect(data).toHaveProperty('message', 'File deleted successfully');
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/auth-upload.test.ts:197:35

  7) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:58:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should search by message 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected substring: [32m"database"[39m
    Received string:    [31m"bulk error 2"[39m

      63 |             expect(Array.isArray(data.errors)).toBeTruthy();
      64 |             data.errors.forEach((error: any) => {
    > 65 |                 expect(error.message.toLowerCase()).toContain('database');
         |                                                     ^
      66 |             });
      67 |         });
      68 |
        at forEach (/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:65:53)
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:64:25

  8) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:69:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by resolved status 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32mfalse[39m
    Received: [31mtrue[39m

      74 |             expect(Array.isArray(data.errors)).toBeTruthy();
      75 |             data.errors.forEach((error: any) => {
    > 76 |                 expect(error.resolved).toBe(false);
         |                                        ^
      77 |             });
      78 |         });
      79 |
        at forEach (/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:76:40)
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:75:25

  9) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:347:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should retrieve error statistics 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeTruthy[2m()[22m

    Received: [31mfalse[39m

      348 |             const response = await apiContext.get('/api/errors/stats');
      349 |
    > 350 |             expect(response.ok()).toBeTruthy();
          |                                   ^
      351 |             const stats = await response.json();
      352 |             expect(stats).toHaveProperty('total');
      353 |             expect(stats).toHaveProperty('bySeverity');
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:350:35

  10) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:359:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should filter statistics by date range 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeTruthy[2m()[22m

    Received: [31mfalse[39m

      362 |             );
      363 |
    > 364 |             expect(response.ok()).toBeTruthy();
          |                                   ^
      365 |             const stats = await response.json();
      366 |             expect(stats).toHaveProperty('dateRange');
      367 |         });
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:364:35

  11) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:501:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/kiosks ‚Ä∫ should create new kiosk 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeTruthy[2m()[22m

    Received: [31mfalse[39m

      510 |             });
      511 |
    > 512 |             expect(response.ok()).toBeTruthy();
          |                                   ^
      513 |             const created = await response.json();
      514 |             expect(created.kioskNumber).toBe(newKiosk.kioskNumber);
      515 |         });
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:512:35

  12) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:707:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should handle Excel file upload 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeTruthy[2m()[22m

    Received: [31mfalse[39m

      718 |             });
      719 |
    > 720 |             expect(response.ok()).toBeTruthy();
          |                                   ^
      721 |             const result = await response.json();
      722 |             expect(result).toHaveProperty('fileId');
      723 |             expect(result).toHaveProperty('filename');
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:720:35

  13) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:726:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should reject files exceeding size limit 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBe[2m([22m[32mexpected[39m[2m) // Object.is equality[22m

    Expected: [32m413[39m
    Received: [31m400[39m

      737 |             });
      738 |
    > 739 |             expect(response.status()).toBe(413); // Payload Too Large
          |                                       ^
      740 |         });
      741 |
      742 |         test('should reject unsupported file types', async ({ apiContext }) => {
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:739:39

  14) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:760:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ GET /api/uploads/:fileId ‚Ä∫ should retrieve upload status 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeTruthy[2m()[22m

    Received: [31mfalse[39m

      771 |             // Check status
      772 |             const statusResponse = await apiContext.get(`/api/uploads/${upload.fileId}`);
    > 773 |             expect(statusResponse.ok()).toBeTruthy();
          |                                         ^
      774 |
      775 |             const status = await statusResponse.json();
      776 |             expect(status).toHaveProperty('fileId');
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:773:41

  15) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:785:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/firebase ‚Ä∫ should authenticate with valid Firebase token 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoHaveProperty[2m([22m[32mpath[39m[2m)[22m

    Expected path: [32m"sessionToken"[39m
    Received path: [31m[][39m

    Received value: [31m{"email": "test@stacklens.ai", "provider": "firebase", "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOjEsImlhdCI6MTc2NDA5Nzg5NywiZXhwIjoxNzY0MTg0Mjk3fQ.ho9L4SSGsBy0gu2R_aXyYzyfiXdDVKlbA_ecSkfnNKg", "user": {"createdAt": "+057872-01-12T00:20:00.000Z", "department": null, "email": "test@stacklens.ai", "firstName": "Test", "id": 1, "isActive": true, "lastLogin": "2025-11-25T19:11:37.000Z", "lastName": "User", "profileImageUrl": "https://example.com/photo.jpg", "role": "admin", "updatedAt": "+057872-01-12T00:20:00.000Z", "username": "Test User"}, "userId": 1}[39m

      794 |             expect(auth).toHaveProperty('userId');
      795 |             expect(auth).toHaveProperty('email');
    > 796 |             expect(auth).toHaveProperty('sessionToken');
          |                          ^
      797 |         });
      798 |
      799 |         test('should reject invalid token', async ({ apiContext }) => {
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:796:26

  16) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:811:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/logout ‚Ä∫ should logout user 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeTruthy[2m()[22m

    Received: [31mfalse[39m

      824 |             });
      825 |
    > 826 |             expect(logoutResponse.ok()).toBeTruthy();
          |                                         ^
      827 |         });
      828 |     });
      829 |
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:826:41

  17) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:893:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should enforce maximum payload size 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m201[39m
    Received array: [31m[413, 400][39m

      902 |         });
      903 |
    > 904 |         expect([413, 400]).toContain(response.status());
          |                            ^
      905 |     });
      906 |
      907 |     test('should validate required headers', async ({ apiContext }) => {
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:904:28

  18) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:924:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should validate URL parameter formats 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m200[39m
    Received array: [31m[400, 422][39m

      925 |         const response = await apiContext.get('/api/errors?page=invalid');
      926 |
    > 927 |         expect([400, 422]).toContain(response.status());
          |                            ^
      928 |     });
      929 |
      930 |     test('should handle special characters in query params', async ({ apiContext }) => {
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:927:28

  19) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1015:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should provide helpful error messages 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeTruthy[2m()[22m

    Received: [31mundefined[39m

      1021 |         const error = await response.json();
      1022 |
    > 1023 |         expect(error.message).toBeTruthy();
           |                               ^
      1024 |         expect(error.message.length).toBeGreaterThan(0);
      1025 |     });
      1026 |
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:1023:31

  20) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1116:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle limit=0 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m200[39m
    Received array: [31m[400, 422][39m

      1117 |         const response = await apiContext.get('/api/errors?page=1&limit=0');
      1118 |
    > 1119 |         expect([400, 422]).toContain(response.status());
           |                            ^
      1120 |     });
      1121 |
      1122 |     test('should enforce maximum limit', async ({ apiContext }) => {
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:1119:28

  21) [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1164:5 ‚Ä∫ API Tests - Concurrent Operations ‚Ä∫ should prevent race conditions on updates 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoContain[2m([22m[32mexpected[39m[2m) // indexOf[22m

    Expected value: [32m404[39m
    Received array: [31m[200, 409][39m

      1189 |         // All should succeed or have proper conflict handling
      1190 |         responses.forEach(r => {
    > 1191 |             expect([200, 409]).toContain(r.status());
           |                                ^
      1192 |         });
      1193 |     });
      1194 | });
        at forEach (/Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:1191:32)
        at /Users/deepak/Downloads/Projects/StackLens-AI-Deploy/tests/api/comprehensive.test.ts:1190:19

  21 failed
    [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:84:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should upload Excel file 
    [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:104:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should upload CSV file 
    [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:119:5 ‚Ä∫ File Upload API ‚Ä∫ POST /api/upload - should reject invalid file type 
    [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:138:5 ‚Ä∫ File Upload API ‚Ä∫ GET /api/files - should list uploaded files 
    [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:154:5 ‚Ä∫ File Upload API ‚Ä∫ GET /api/files/:id - should get file details 
    [api-tests] ‚Ä∫ tests/api/auth-upload.test.ts:179:5 ‚Ä∫ File Upload API ‚Ä∫ DELETE /api/files/:id - should delete file 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:58:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should search by message 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:69:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors ‚Ä∫ should filter by resolved status 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:347:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should retrieve error statistics 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:359:9 ‚Ä∫ API Tests - Error Management Endpoints ‚Ä∫ GET /api/errors/stats ‚Ä∫ should filter statistics by date range 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:501:9 ‚Ä∫ API Tests - Store & Kiosk Management ‚Ä∫ POST /api/kiosks ‚Ä∫ should create new kiosk 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:707:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should handle Excel file upload 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:726:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ POST /api/upload ‚Ä∫ should reject files exceeding size limit 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:760:9 ‚Ä∫ API Tests - File Upload & Processing ‚Ä∫ GET /api/uploads/:fileId ‚Ä∫ should retrieve upload status 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:785:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/firebase ‚Ä∫ should authenticate with valid Firebase token 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:811:9 ‚Ä∫ API Tests - Authentication & Authorization ‚Ä∫ POST /api/auth/logout ‚Ä∫ should logout user 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:893:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should enforce maximum payload size 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:924:5 ‚Ä∫ API Tests - Request Validation ‚Ä∫ should validate URL parameter formats 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1015:5 ‚Ä∫ API Tests - Error Handling ‚Ä∫ should provide helpful error messages 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1116:5 ‚Ä∫ API Tests - Pagination Edge Cases ‚Ä∫ should handle limit=0 
    [api-tests] ‚Ä∫ tests/api/comprehensive.test.ts:1164:5 ‚Ä∫ API Tests - Concurrent Operations ‚Ä∫ should prevent race conditions on updates 
  81 passed (44.2s)

[36m  Serving HTML report at http://localhost:54969. Press Ctrl+C to quit.[39m
